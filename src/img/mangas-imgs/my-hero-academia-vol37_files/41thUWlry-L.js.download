(function(l){var c=window.AmazonUIPageJS||window.P,q=c._namespace||c.attributeErrors,k=q?q("DetailPageLookInsideAssets",""):c;k.guardFatal?k.guardFatal(l)(k,window):k.execute(function(){l(k,window)})})(function(l,c,q){function k(h){c.ue&&c.ue.count&&c.ue.tag&&(ue.count(h,0),ue.tag(G()))}function g(h){if("undefined"!==typeof h){var e=c.ue;if(e&&e.count&&e.tag){var d=e.count(h)||0;e.count(h,d+1);e.tag(G())}}}function G(){var c=/ipad|tablet/i.test(navigator.userAgent);return/mobile/i.test(navigator.userAgent)&&
!c?"mobile":c?"tablet":"desktop"}function R(c,e){var d={};var f=X.COUNT;f={Timestamp:Date.now(),CloudWatchMetrics:[{Namespace:"LITB",Dimensions:[["region"],["marketplace"],["platform"]],Metrics:[{Name:c,Unit:f}]}]};d._aws=f;d.region=e.region;d.marketplace=e.marketplace;d.platform=G();d[c]=1;return{logs:[{level:"info",message:c,context:{emfLog:d,logTime:Date.now()}}]}}l.when("A","jQuery","ebooksImageBlockATF","cf").execute(function(h,e,d){function f(){k("litbReaderIframeSrcNotAvailable");k("litbReaderIframeContentWindowNotAvailable");
k("litbStickerClickedOnKindleBook");k("bookImageClickedOnKindleBook");I();N.addClass("image-2d");if(d&&d.litbData&&d.litbData.hasLitb&&d.litbData.litbReftag){N.addClass("clickableImage");var a=document.getElementById("litb-read-frame");a&&a.dataset&&a.dataset.src?a.src=a.dataset.src:g("litbReaderIframeSrcNotAvailable");d.litbData.showNewDesktopLitb&&a?(z.click(function(a){m(!0);p(a.target)&&(g("litbStickerClickedOnKindleBook"),b.incrementMetric("litbStickerClickedOnKindleBook"))}),c.addEventListener("popstate",
Y,!1),c.addEventListener("message",r,!1),C(),a=t(c.location.search),a.asin&&a.format&&m(!1)):z.click(function(a){T(!0);p(a.target)&&g("litbStickerClickedOnKindleBook")})}e(c).resize(l)}function p(a){return a&&("ebooksSitbLogoImg"===a.getAttribute("id")||"ebooksSitbLogo"===a.getAttribute("id"))}function C(){var a=document.getElementById("litb-read-frame");if(a&&a.contentWindow){if(u){a.contentWindow.postMessage(JSON.stringify({command:"readyLITB"}),"*");return}a.contentWindow.postMessage(JSON.stringify({command:"readyLITB"}),
"*");U>Q&&!V&&(V=!0,g("DpIsReadyAttemptsOverMax:Count"));U++}else a&&g("litbReaderIframeContentWindowNotAvailable");setTimeout(C,O)}function m(a){W++;u?T(a):W>R||setTimeout(function(){m(a)},O)}function T(a){g("bookImageClickedOnKindleBook");b.incrementMetric("bookImageClickedOnKindleBook");var B=document.getElementById("litb-read-frame");d.litbData&&d.litbData.showNewDesktopLitb&&B&&B.contentWindow?(a=JSON.stringify({command:"initializeLITB",time:Date.now(),search:c.location.search,newSession:a}),
B.contentWindow.postMessage(a,"*"),A(),B.focus()):(B&&!B.contentWindow&&g("litbReaderIframeContentWindowNotAvailable"),"undefined"!=typeof SitbReader&&SitbReader.LightboxActions.openReader(d.litbData.litbReftag))}function Y(){var a=document.getElementById("litb-read-frame");d.litbData&&d.litbData.showNewDesktopLitb&&a&&a.contentWindow?(H||!D()&&!w||(A(),a.contentWindow.postMessage(JSON.stringify({command:"updateLITB",search:c.location.search}),a.src)),H=!1):a&&g("litbReaderIframeContentWindowNotAvailable");
w||v()}function A(){var a=document.getElementById("litb-read-frame");if(a){S=c.scrollY;var b=document.body;b.style.position="fixed";b.style.top="-"+S+"px";b.style.right="0";b.style.left="0";a.style.cssText="position:fixed; width:100%; height:100%; top:0px; left:0px; z-index:1000; display: block; border: 0 none;";w=!0}}function y(a){var b=document.getElementById("litb-read-frame");b&&(b.style.cssText="display: none",b=document.body,b.style.position="",b.style.top="",b.style.right="",b.style.left="",
c.scrollTo(0,parseInt(S||"0",10)),w=!1,a&&v())}function v(){D()&&c.history.replaceState({},document.title,c.location.origin+c.location.pathname+E()+c.location.hash)}function r(a){var b;if(b="string"===typeof a.data)try{JSON.parse(a.data),b=!0}catch(da){b=!1}b&&(a=JSON.parse(a.data),b=a.command,"closeLITB"===b?a.depth?(H=!0,c.history.go(-1*a.depth),y(!1)):y(!0):"updateLITB"===b&&a.search?(b=t(c.location.search),c.history.pushState({},document.title,c.location.origin+c.location.pathname+x(a.search)+
c.location.hash),b.asin!==a.search.asin&&c.dispatchEvent(new PopStateEvent("popstate"))):"readyLITB"===b?u=!0:"reloadLITB"===b&&c.location.reload())}function I(){var a=M.outerWidth(),b=M.outerHeight(),e=L.outerHeight()-(L.outerHeight()-M.outerHeight())/2;N.width(a).height(b);M.css({position:"relative",top:"0",left:"0"});B.height(e);(c.innerWidth||document.body.offsetWidth)<d.windowWidthThreshold&&l()}function l(){var a=c.innerWidth||document.body.offsetWidth;if(!(0>=a))if(a>d.windowWidthThreshold){a=
d.configWidths[1];var b=a/d.holderRatio,B=d.frontImageWidth,e=d.frontImageHeight;J(a,b,B,e)}else a<d.windowWidthThreshold&&(a=d.configWidths[0],b=a/d.holderRatio,d.frontImageAspectRatio>d.holderRatio?(B=a,e=B/d.frontImageAspectRatio):(e=b,B=e*d.frontImageAspectRatio),J(a,b,B,e))}function J(a,b,c,f){if(0<a&&0<b&&0<c&&0<f){G.length&&q.length&&(G.css("margin-left",a+d.centerColMargin).removeClass("centerColumn"),q.width(a));var x=b+d.containerMargin;z.width(a).height(x);M.width(c).height(f);N.width(c).height(f);
B.height(b-(b-M.outerHeight())/2);e(this).trigger("imageResize")}}function t(a){var b={};0<a.length&&a.substr(1).split("\x26").forEach(function(a){a=a.split("\x3d");2===a.length&&(b[a[0]]=a[1])});return b}function n(a){var b="";Object.keys(a).forEach(function(c){0<b.length&&(b+="\x26");b+=c+"\x3d"+a[c]});return b}function x(a){if(c.location.search){var b=t(c.location.search);b.asin=a.asin;b.revisionId=a.revisionId;b.format=a.format;b.depth=a.depth;a=n(b)}else a=n(a);return"?"+a}function E(){var a=
"";c.location.search&&(a=t(c.location.search),delete a.asin,delete a.revisionId,delete a.format,delete a.depth,a=n(a));return"?"+a}function D(){var a=t(c.location.search);return a.asin&&a.format}var H=!1,u=!1,w=!1,z=e("#ebooksImageBlock"),K=e("#ebooksImgBlkFront"),F=e("#ebooksImgBlockInlineVideo"),a=e("#ebooksImgBlockInlineVideoSrc"),b=new P(h,e,d);if(z.length){var L=z.find("#ebooks-img-wrapper"),B=z.find("#ebooksImageBlockContainer"),N=z.find("#ebooks-img-canvas"),M=N.find(".frontImage"),q=e("#leftCol"),
G=e("#centerCol");f()}else throw Error("Element with id imageBlock is missing");h.on("a:image:load",function(b){F.length&&a.length&&d.hasCoverImageInlineVideo&&(K.hide(),F.show())});h.loadDynamicImage(K);var O=100,Q=50,R=280,V=!1,U=0,W=0,S=0});l.when("A","jQuery","ImageBlockATF","cf").execute(function(h,e,d){function f(){var e=c.innerWidth||document.body.offsetWidth;if(!(0>=e))if(e>d.windowWidthThreshold&&m.width()<=d.configWidths[0]){e=d.configWidths[1];var f=e/d.holderRatio,h=d.frontImageWidth,
g=d.frontImageHeight;p(e,f,h,g)}else e<d.windowWidthThreshold&&m.width()>d.configWidths[0]&&(e=d.configWidths[0],f=e/d.holderRatio,d.frontImageAspectRatio>d.holderRatio?(h=e,g=h/d.frontImageAspectRatio):(g=f,h=g*d.frontImageAspectRatio),p(e,f,h,g))}function p(c,f,h,g){if(0<c&&0<f&&0<h&&0<g){J.css("margin-left",c+d.centerColMargin).removeClass("centerColumn");q.css("width",c);var p=f+d.containerMargin+d.flipLinkMinHeight+d.litbHeight;m.css("width",c).css("height",p);C(h,g);k.css("height",f+d.litbHeight-
(f+d.litbHeight-r.outerHeight())/2);e(this).trigger("imageResize")}}function C(c,d){r.css("width",c).css("height",d);c=r.width();d=r.height();A.css("width",c).css("height",d);n.resizeCanvas(c);"undefined"!==typeof y&&0<y.length&&(y.css("width",c).css("height",d),v.css("height",d),isShowing3D&&l&&(d=v.width(),t=(c-d)/2-2,v.removeClass("ieTransition").css("left",(c-d)/2),v.css("transform","perspective(3000px) rotateY(-65deg) translateZ("+t+"px)"),h.delay(function(){v.addClass("ieTransition")},10)))}
var m=e("#imageBlock"),g=m.find("#img-wrapper"),k=m.find("#imageBlockContainer"),A=m.find("#img-canvas"),y=A.find(".backImage"),v=A.find(".sideImage"),r=A.find(".frontImage"),l=e.browser.msie||!!navigator.userAgent.match(/Trident/),q=e("#leftCol"),J=e("#centerCol"),t=0,n=new O(h,e,m,d,!0);n.initializeMetrics();(function(){if(r.offset()){var c=g.outerHeight()-(g.outerHeight()-r.outerHeight())/2,d=v.outerWidth();g.css("position","relative");r.css({position:"relative",top:"0",left:"0"});y.css("position",
"absolute").css("top","0").css("left","0");v.css("position","absolute").css("top","0").css("left","-"+d+"px");k.css("height",c)}})();A.addClass("image-2d");n.initializeSticker("front");d.disableResize||e(c).resize(f)});l.when("a-modal-handlers").execute("mark-booksimageblock-interactive-time",function(){"function"===typeof c.markFeatureInteractive&&c.markFeatureInteractive("booksImageBlock",{hasComponents:!0,components:[{name:"thumbnail"}]})});l.when("A","jQuery","MinimalLITBImageBlockATF").execute(function(c,
e,d){var f=e("#minimalImageBlock");c=new O(c,e,f,d,!1);c.initializeMetrics();c.initializeSticker(q)});var O=function(){return function(h,e,d,f,p){function C(){var a=document.getElementById("litb-read-frame");if(a){if(H){a.contentWindow.postMessage(JSON.stringify({command:"readyLITB"}),"*");return}a.contentWindow.postMessage(JSON.stringify({command:"readyLITB"}),"*");50<z&&!w&&(w=!0,g("DpIsReadyAttemptsOverMax:Count"));z++}setTimeout(C,100)}function m(a,b){K++;H?l(a,b):280<K?g("litbReadyMaxAttempts"):
setTimeout(function(){m(a,b)},100)}function l(a,b){g("litbStickerClickedOnPrintBook");E.incrementMetric("litbStickerClickedOnPrintBook");var d=document.getElementById("litb-read-frame");f.litbData&&f.litbData.showNewDesktopLitb&&d?(a=JSON.stringify({command:"initializeLITB",time:Date.now(),search:c.location.search,newSession:a}),d.contentWindow.postMessage(a,"*"),v(),d.focus()):"undefined"!=typeof SitbReader&&(g("sitbReaderCodePathUsed"),"back"==b&&SitbReader.currentBook&&SitbReader.currentBook.bookmarks?
(d=SitbReader.currentBook.bookmarks.getFirstAndLastPageNumberByName("Back Cover").first,a=SitbReader.currentBook.bookmarks.getFirstAndLastPageNumberByName("Back Flap").first,d?SitbReader.LightboxActions.openReaderToPage(d):a?SitbReader.LightboxActions.openReaderToPage(a):SitbReader.LightboxActions.openReader(f.litbData.litbReftag)):SitbReader.LightboxActions.openReader(f.litbData.litbReftag))}function q(){I()&&c.history.replaceState({},document.title,c.location.origin+c.location.pathname+A()+c.location.hash)}
function A(){var a="";c.location.search&&(a=n(c.location.search),delete a.asin,delete a.revisionId,delete a.format,delete a.depth,a=t(a));return"?"+a}function y(a){var b=document.getElementById("litb-read-frame");b&&(b.style.cssText="display: none",b=document.body,b.style.position="",b.style.top="",b.style.right="",b.style.left="",c.scrollTo(0,parseInt(F||"0",10)),u=!1,a&&q())}function v(){var a=document.getElementById("litb-read-frame");if(a){F=c.scrollY;var b=document.body;b.style.position="fixed";
b.style.top="-"+F+"px";b.style.right="0";b.style.left="0";a.style.cssText="position:fixed; width:100%; height:100%; top:0px; left:0px; z-index:1000; display: block; border: 0 none;";u=!0}}function r(){var a=document.getElementById("litb-read-frame");f.litbData&&f.litbData.showNewDesktopLitb&&a&&(D||!I()&&!u||(v(),a.contentWindow.postMessage(JSON.stringify({command:"updateLITB",search:c.location.search}),a.src)),D=!1);u||q()}function I(){var a=n(c.location.search);return a.asin&&a.format}function G(a){var b;
if(b="string"===typeof a.data)try{JSON.parse(a.data),b=!0}catch(L){b=!1}b&&(a=JSON.parse(a.data),b=a.command,"closeLITB"===b?a.depth?(D=!0,c.history.go(-1*a.depth),y(!1)):y(!0):"updateLITB"===b&&a.search?(b=n(c.location.search),c.history.pushState({},document.title,c.location.origin+c.location.pathname+J(a.search)+c.location.hash),b.asin!==a.search.asin&&c.dispatchEvent(new PopStateEvent("popstate"))):"readyLITB"===b?H=!0:"reloadLITB"===b&&c.location.reload())}function J(a){if(c.location.search){var b=
n(c.location.search);b.asin=a.asin;b.revisionId=a.revisionId;b.format=a.format;b.depth=a.depth;a=t(b)}else a=t(a);return"?"+a}function t(a){var b="";Object.keys(a).forEach(function(c){0<b.length&&(b+="\x26");b+=c+"\x3d"+a[c]});return b}function n(a){var b={};0<a.length&&a.substr(1).split("\x26").forEach(function(a){a=a.split("\x3d");2===a.length&&(b[a[0]]=a[1])});return b}p={};var x=d.find("#litb-canvas"),E=new P(h,e,f),D=!1,H=!1,u=!1,w=!1,z=0,K=0,F=0;p.initializeMetrics=function(){k("litbReadyMaxAttempts");
k("litbReaderIframeSrcNotAvailable");k("sitbReaderCodePathUsed");k("litbStickerClickedOnPrintBook")};p.initializeSticker=function(a){if(f&&f.litbData&&(f.litbData.hasLitb&&f.litbData.litbReftag||f.litbData.showNewDesktopLitb)){x.addClass("litb-on-click");x.click(m.bind(this,!0,a));var b=document.getElementById("litb-read-frame");b&&b.dataset&&b.dataset.src?b.src=b.dataset.src:g("litbReaderIframeSrcNotAvailable");f.litbData.showNewDesktopLitb&&b?(c.addEventListener("popstate",r,!1),c.addEventListener("message",
G,!1),C(),b=n(c.location.search),b.asin&&b.format&&m(!1,a)):x.click(function(){l(this,!0,a)});b={hasComponents:!0,components:[{name:"mainimage"}]};"function"===typeof c.markFeatureInteractive&&c.markFeatureInteractive("booksImageBlock",b)}};p.resizeCanvas=function(a){x.css("width",a)};return p}}();l.when("A","jQuery","EbooksReadSample","cf").execute(function(c,e,d){(new Z(c,e,d)).setupInteractions(d)});l.when("A","jQuery","PbooksReadSample","cf").execute(function(c,e,d){var f=e("#imageBlock"),g=e("#pbooksReadSample");
(new aa(c,e,f,d,g)).initializeSticker(q)});var Z=function(){return function(h,e,d){function f(){var b=document.getElementById("litb-read-frame");if(b&&b.contentWindow){if(x){b.contentWindow.postMessage(JSON.stringify({command:"readyLITB"}),"*");u.isSpinnerVisible()&&(g("SpinnerShown:Count"),u.hideSpinnerAndShowText(!1),C(!0));return}b.contentWindow.postMessage(JSON.stringify({command:"readyLITB"}),"*");a>z&&!F&&(F=!0,g("DpIsReadyAttemptsOverMax:Count"));a++}else b&&g("litbReaderIframeContentWindowNotAvailable");
setTimeout(f,w)}function p(a){b++;x?C(a):b>K||setTimeout(function(){p(a)},w)}function C(a){a&&(g("readSampleButtonClicked"),H.incrementMetric("readSampleButtonClicked"));var b=document.getElementById("litb-read-frame");b&&!b.contentWindow&&g("litbReaderIframeContentWindowNotAvailable");d.litbData&&d.litbData.showNewDesktopLitb&&b&&b.contentWindow?(u.isSpinnerVisible()&&u.hideSpinnerAndShowText(!1),a=JSON.stringify({command:"initializeLITB",time:Date.now(),search:c.location.search,newSession:a}),b.contentWindow.postMessage(a,
"*"),k(),b.focus()):d&&d.litbData&&d.litbData.hasLitb&&(c.smash?l.when("mash").execute(function(a){a.navigate({url:d.litbData.litbReaderUrl,transition:"slide"})}):c.location.href=d.litbData.litbReaderUrl)}function m(){var a=document.getElementById("litb-read-frame");d.litbData&&d.litbData.showNewDesktopLitb&&a&&a.contentWindow?(n||!y()&&!E||(k(),a.contentWindow.postMessage(JSON.stringify({command:"updateLITB",search:c.location.search}),a.src)),n=!1):a&&g("litbReaderIframeContentWindowNotAvailable");
E||A()}function k(){var a=document.getElementById("litb-read-frame");if(a){L=c.scrollY;var b=document.body;b.style.position="fixed";b.style.top="-"+L+"px";b.style.right="0";b.style.left="0";a.style.cssText="position:fixed; width:100%; height:100%; top:0px; left:0px; z-index:1000; display: block; border: 0 none;";E=!0}}function q(a){var b=document.getElementById("litb-read-frame");b&&(b.style.cssText="display: none",b=document.body,b.style.position="",b.style.top="",b.style.right="",b.style.left="",
c.scrollTo(0,parseInt(L||"0",10)),E=!1,a&&A())}function A(){y()&&c.history.replaceState({},document.title,c.location.origin+c.location.pathname+J())}function y(){var a=r(c.location.search);return a.asin&&a.format}function v(a){var b;if(b="string"===typeof a.data)try{JSON.parse(a.data),b=!0}catch(M){b=!1}b&&(a=JSON.parse(a.data),b=a.command,"closeLITB"===b?a.depth?(n=!0,c.history.go(-1*a.depth),q(!1)):q(!0):"updateLITB"===b&&a.search?(b=r(c.location.search),c.history.pushState({},document.title,c.location.origin+
c.location.pathname+G(a.search)),b.asin!==a.search.asin&&c.dispatchEvent(new PopStateEvent("popstate"))):"readyLITB"===b&&(x=!0))}function r(a){var b={};0<a.length&&a.substr(1).split("\x26").forEach(function(a){a=a.split("\x3d");2===a.length&&(b[a[0]]=a[1])});return b}function I(a){var b="";Object.keys(a).forEach(function(c){0<b.length&&(b+="\x26");b+=c+"\x3d"+a[c]});return b}function G(a){if(c.location.search){var b=r(c.location.search);b.asin=a.asin;b.revisionId=a.revisionId;b.format=a.format;b.depth=
a.depth;a=I(b)}else a=I(a);return"?"+a}function J(){var a="";c.location.search&&(a=r(c.location.search),delete a.asin,delete a.revisionId,delete a.format,delete a.depth,a=I(a));return"?"+a}var t={},n=!1,x=!1,E=!1,D=e("#ebooksReadSample"),H=new P(h,e,d),u=new Q(h,e);t.setupInteractions=function(){if(d&&d.litbData&&d.litbData.hasLitb){var a=document.getElementById("litb-read-frame");a&&a.dataset&&a.dataset.src?a.src=a.dataset.src:d.litbData.showNewDesktopLitb&&g("litbReaderIframeSrcNotAvailable");d.litbData.showNewDesktopLitb&&
a?(D.click(function(a){x||u.isSpinnerVisible()||(u.showSpinnerAndHideText(),g("SpinnerShown:Count"),setTimeout(function(){1>e("#litb-read-frame").length&&u.hideSpinnerAndShowText(!1)},3E4));p(!0)}),c.addEventListener("popstate",m,!1),c.addEventListener("message",v,!1),f(),a=r(c.location.search),a.asin&&a.format&&p(!1)):D.click(function(a){C(!0)})}};var w=100,z=50,K=280,F=!1,a=0,b=0,L=0;return t}}(),aa=function(){return function(h,e,d,f,p){function C(){var a=document.getElementById("litb-read-frame");
if(a){if(E){a.contentWindow.postMessage(JSON.stringify({command:"readyLITB"}),"*");w.isSpinnerVisible()&&(g("SpinnerShown:Count"),w.hideSpinnerAndShowText(!1),l(!0));return}a.contentWindow.postMessage(JSON.stringify({command:"readyLITB"}),"*");50<z&&!H&&(H=!0,g("DpIsReadyAttemptsOverMax:Count"));z++}setTimeout(C,100)}function m(a,b){K++;E?l(a,b):280<K?g("litbReadyMaxAttempts"):setTimeout(function(){m(a,b)},100)}function l(a){g("printReadSampleButtonClicked");u.incrementMetric("printReadSampleButtonClicked");
var b=document.getElementById("litb-read-frame");f.litbData&&f.litbData.showNewDesktopLitb&&b?(w.isSpinnerVisible()&&w.hideSpinnerAndShowText(!1),a=JSON.stringify({command:"initializeLITB",time:Date.now(),search:c.location.search,newSession:a}),b.contentWindow.postMessage(a,"*"),v(),b.focus()):c.location.href=f.litbData.litbReaderUrl}function q(){I()&&c.history.replaceState({},document.title,c.location.origin+c.location.pathname+A()+c.location.hash)}function A(){var a="";c.location.search&&(a=n(c.location.search),
delete a.asin,delete a.revisionId,delete a.format,delete a.depth,a=t(a));return"?"+a}function y(a){var b=document.getElementById("litb-read-frame");b&&(b.style.cssText="display: none",b=document.body,b.style.position="",b.style.top="",b.style.right="",b.style.left="",c.scrollTo(0,parseInt(F||"0",10)),D=!1,a&&q())}function v(){var a=document.getElementById("litb-read-frame");if(a){F=c.scrollY;var b=document.body;b.style.position="fixed";b.style.top="-"+F+"px";b.style.right="0";b.style.left="0";a.style.cssText=
"position:fixed; width:100%; height:100%; top:0px; left:0px; z-index:1000; display: block; border: 0 none;";D=!0}}function r(){var a=document.getElementById("litb-read-frame");f.litbData&&f.litbData.showNewDesktopLitb&&a&&(x||!I()&&!D||(v(),a.contentWindow.postMessage(JSON.stringify({command:"updateLITB",search:c.location.search}),a.src)),x=!1);D||q()}function I(){var a=n(c.location.search);return a.asin&&a.format}function G(a){var b;if(b="string"===typeof a.data)try{JSON.parse(a.data),b=!0}catch(L){b=
!1}b&&(a=JSON.parse(a.data),b=a.command,"closeLITB"===b?a.depth?(x=!0,c.history.go(-1*a.depth),y(!1)):y(!0):"updateLITB"===b&&a.search?(b=n(c.location.search),c.history.pushState({},document.title,c.location.origin+c.location.pathname+J(a.search)+c.location.hash),b.asin!==a.search.asin&&c.dispatchEvent(new PopStateEvent("popstate"))):"readyLITB"===b?E=!0:"reloadLITB"===b&&c.location.reload())}function J(a){if(c.location.search){var b=n(c.location.search);b.asin=a.asin;b.revisionId=a.revisionId;b.format=
a.format;b.depth=a.depth;a=t(b)}else a=t(a);return"?"+a}function t(a){var b="";Object.keys(a).forEach(function(c){0<b.length&&(b+="\x26");b+=c+"\x3d"+a[c]});return b}function n(a){var b={};0<a.length&&a.substr(1).split("\x26").forEach(function(a){a=a.split("\x3d");2===a.length&&(b[a[0]]=a[1])});return b}d={};var x=!1,E=!1,D=!1,H=!1,u=new P(h,e,f),w=new Q(h,e),z=0,K=0,F=0;d.initializeMetrics=function(){k("litbReadyMaxAttempts");k("litbReaderIframeSrcNotAvailable");k(sitbReaderCodePathUsedMetric);k(litbStickerClickedMetric)};
d.initializeSticker=function(a){if(f&&f.litbData&&(f.litbData.hasLitb&&f.litbData.litbReftag||f.litbData.showNewDesktopLitb)){p.click(function(){E||w.isSpinnerVisible()||!f.litbData.showNewDesktopLitb||(w.showSpinnerAndHideText(),g("SpinnerShown:Count"),setTimeout(function(){1>e("#litb-read-frame").length&&spinnerUtls.hideSpinnerAndShowText(!1)},3E4));m(this,!0,a)});var b=document.getElementById("litb-read-frame");b&&b.dataset&&b.dataset.src?b.src=b.dataset.src:g("litbReaderIframeSrcNotAvailable");
f.litbData.showNewDesktopLitb&&b?(c.addEventListener("popstate",r,!1),c.addEventListener("message",G,!1),C(),b=n(c.location.search),b.asin&&b.format&&m(!1,a)):p.click(l.bind(this,!0,a))}};return d}}();l.when("A","jQuery","MobileLitbImageBlockATF").execute(function(g,e,d){var f=new ba(g,e,d);(function(){!c.smash&&d&&d.litbData&&d.litbData.hasLitb&&e("#sitb-sticker-container").click(function(c){f.triggerWeblab("LITB_EVO_PBOOK_MWEB_CLICK_ON_COVER_DPX_598270")})})()});var ba=function(){return function(c,
e,d){function f(){var c=document.createElement("a");c.href=d.litbData.litbReaderUrl;return c.hostname}return{triggerWeblab:function(c){e.ajax("https://"+f()+"/sample/trigger-weblab?weblab\x3d"+c,{method:"get",xhrFields:{withCredentials:!0},success:function(c){return c.treatment},error:function(c){return"Unable to trigger weblab due to "+c.responseText}})}}}}(),ca={"read.amazon.com":{marketplace:"US",region:"us-east-1",katalCloudWatchEndpointEmf:"https://b11v5ewz9l.execute-api.us-east-1.amazonaws.com/prod/v1/log"},
"read.amazon.co.jp":{marketplace:"JP",region:"us-west-2",katalCloudWatchEndpointEmf:"https://bs7kdk5kxb.execute-api.us-west-2.amazonaws.com/prod/v1/log"},"read.amazon.ca":{marketplace:"CA",region:"us-east-1",katalCloudWatchEndpointEmf:"https://b11v5ewz9l.execute-api.us-east-1.amazonaws.com/prod/v1/log"},"ler.amazon.com.br":{marketplace:"BR",region:"us-east-1",katalCloudWatchEndpointEmf:"https://b11v5ewz9l.execute-api.us-east-1.amazonaws.com/prod/v1/log"},"read.amazon.com.au":{marketplace:"AU",region:"us-west-2",
katalCloudWatchEndpointEmf:"https://bs7kdk5kxb.execute-api.us-west-2.amazonaws.com/prod/v1/log"},"www.amazon.sg":{marketplace:"SG",region:"us-west-2",katalCloudWatchEndpointEmf:"https://bs7kdk5kxb.execute-api.us-west-2.amazonaws.com/prod/v1/log"},"leer.amazon.com.mx":{marketplace:"MX",region:"us-east-1",katalCloudWatchEndpointEmf:"https://b11v5ewz9l.execute-api.us-east-1.amazonaws.com/prod/v1/log"},"read.amazon.co.uk":{marketplace:"GB",region:"eu-west-1",katalCloudWatchEndpointEmf:"https://hjszhb9uk3.execute-api.eu-west-1.amazonaws.com/prod/v1/log"},
"lesen.amazon.de":{marketplace:"DE",region:"eu-west-1",katalCloudWatchEndpointEmf:"https://hjszhb9uk3.execute-api.eu-west-1.amazonaws.com/prod/v1/log"},"lire.amazon.fr":{marketplace:"FR",region:"eu-west-1",katalCloudWatchEndpointEmf:"https://hjszhb9uk3.execute-api.eu-west-1.amazonaws.com/prod/v1/log"},"leggi.amazon.it":{marketplace:"IT",region:"eu-west-1",katalCloudWatchEndpointEmf:"https://hjszhb9uk3.execute-api.eu-west-1.amazonaws.com/prod/v1/log"},"leer.amazon.es":{marketplace:"ES",region:"eu-west-1",
katalCloudWatchEndpointEmf:"https://hjszhb9uk3.execute-api.eu-west-1.amazonaws.com/prod/v1/log"},"lezen.amazon.nl":{marketplace:"NL",region:"eu-west-1",katalCloudWatchEndpointEmf:"https://hjszhb9uk3.execute-api.eu-west-1.amazonaws.com/prod/v1/log"},"read.amazon.in":{marketplace:"IN",region:"eu-west-1",katalCloudWatchEndpointEmf:"https://hjszhb9uk3.execute-api.eu-west-1.amazonaws.com/prod/v1/log"},"read-preprod.amazon.com":{marketplace:"US",region:"us-east-1",katalCloudWatchEndpointEmf:"https://wa9hufu4c9.execute-api.us-east-1.amazonaws.com/prod/v1/log"},
"read-pre-prod-jp.amazon.com":{marketplace:"JP",region:"us-west-2",katalCloudWatchEndpointEmf:"https://arufknsm9d.execute-api.us-west-2.amazonaws.com/prod/v1/log"},"read-pre-prod-ca.amazon.com":{marketplace:"CA",region:"us-east-1",katalCloudWatchEndpointEmf:"https://wa9hufu4c9.execute-api.us-east-1.amazonaws.com/prod/v1/log"},"read-pre-prod-br.amazon.com":{marketplace:"BR",region:"us-east-1",katalCloudWatchEndpointEmf:"https://wa9hufu4c9.execute-api.us-east-1.amazonaws.com/prod/v1/log"},"read-pre-prod-au.amazon.com":{marketplace:"AU",
region:"us-west-2",katalCloudWatchEndpointEmf:"https://arufknsm9d.execute-api.us-west-2.amazonaws.com/prod/v1/log"},"read-pre-prod-mx.amazon.com":{marketplace:"MX",region:"us-east-1",katalCloudWatchEndpointEmf:"https://wa9hufu4c9.execute-api.us-east-1.amazonaws.com/prod/v1/log"},"read-pre-prod-uk.amazon.com":{marketplace:"GB",region:"eu-west-1",katalCloudWatchEndpointEmf:"https://fdoxuxsenl.execute-api.eu-west-1.amazonaws.com/prod/v1/log"},"read-pre-prod-de.amazon.com":{marketplace:"DE",region:"eu-west-1",
katalCloudWatchEndpointEmf:"https://fdoxuxsenl.execute-api.eu-west-1.amazonaws.com/prod/v1/log"},"read-pre-prod-fr.amazon.com":{marketplace:"FR",region:"eu-west-1",katalCloudWatchEndpointEmf:"https://fdoxuxsenl.execute-api.eu-west-1.amazonaws.com/prod/v1/log"},"read-pre-prod-it.amazon.com":{marketplace:"IT",region:"eu-west-1",katalCloudWatchEndpointEmf:"https://fdoxuxsenl.execute-api.eu-west-1.amazonaws.com/prod/v1/log"},"read-pre-prod-es.amazon.com":{marketplace:"ES",region:"eu-west-1",katalCloudWatchEndpointEmf:"https://fdoxuxsenl.execute-api.eu-west-1.amazonaws.com/prod/v1/log"},
"lezen-nl-preprod.dub.xcorp.amazon.com":{marketplace:"NL",region:"eu-west-1",katalCloudWatchEndpointEmf:"https://fdoxuxsenl.execute-api.eu-west-1.amazonaws.com/prod/v1/log"},"read-pre-prod-in.amazon.com":{marketplace:"IN",region:"eu-west-1",katalCloudWatchEndpointEmf:"https://fdoxuxsenl.execute-api.eu-west-1.amazonaws.com/prod/v1/log"},"sg-gamma.aka.amazon.com":{marketplace:"SG",region:"us-west-2",katalCloudWatchEndpointEmf:"https://arufknsm9d.execute-api.us-west-2.amazonaws.com/prod/v1/log"}},P=
function(){return function(c,e,d){function f(){var c=document.createElement("a"),e=document.getElementById("litb-read-frame");e?c.href=e.src:d&&d.litbData&&(c.href=d.litbData.litbReaderUrl);return c.hostname}return{incrementMetric:function(c){try{var d=ca[f()];d&&e.ajax({url:d.katalCloudWatchEndpointEmf,type:"POST",data:JSON.stringify(R(c,d)),success:function(c){return c},error:function(c){return"Unable to log metric due to "+c}})}catch(m){return"Failed to emit metrics to cloudwatch due to "+m}}}}}(),
X={COUNT:"Count",MILLISECONDS:"Milliseconds",NONE:"None"},Q=function(){return function(c,e){c={};var d=0,f=e("#spinny-spinner"),h=e(".read-sample-button-text");c.hideSpinnerAndShowText=function(c){if(null!==f){var e=f.data("startTime");d=0===e.length?d:e;f.css("display","none");null!==h&&h.first().css("display","block");c?g("SPINNER_TIMED_OUT"):/^-?\d+$/.test(d)&&(c=Math.floor(Date.now()/1E3)-d,"undefined"!==typeof ue&&"undefined"!==typeof ue.count&&ue.count("SpinnerLoading:Time",(ue.count("SpinnerLoading:Time")||
0)+c),d=0)}};c.showSpinnerAndHideText=function(){null!==f&&(f.css("display","block"),null!==h&&h.first().css("display","none"),d=Math.floor(Date.now()/1E3),k("SPINNER_TIMED_OUT"))};c.isSpinnerVisible=function(){var c=document.getElementById("spinny-spinner");return null!=c?"none"!==c.style.display:!1};return c}}()});