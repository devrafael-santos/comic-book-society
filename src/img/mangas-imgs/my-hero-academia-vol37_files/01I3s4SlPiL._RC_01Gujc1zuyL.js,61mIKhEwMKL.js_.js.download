(function(b){var c=window.AmazonUIPageJS||window.P,d=c._namespace||c.attributeErrors,a=d?d("DetailPageLayoutAssets",""):c;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,c,d){b.when("A","ready").execute(function(a){var b,d=a.$;a.on("a:expander:zones_progressive_disclosure_expander:toggle:collapse",function(a){(a=d("#dp-pr-top"))&&a.length||c.scrollTo({top:b})});a.on("a:expander:zones_progressive_disclosure_expander:toggle:expand",function(a){b=d(c).scrollTop()})})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("DetailPageBylineInfoAssets@core","DetailPageBylineInfo"):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(u){var h=window.AmazonUIPageJS||window.P,k=h._namespace||h.attributeErrors,G=k?k("SocialShareWidgetAUI","AmazonUI"):h;G.guardFatal?G.guardFatal(u)(G,window):G.execute(function(){u(G,window)})})(function(u,h,k){function G(f){if(Array.isArray(f)){for(var k=0,h=Array(f.length);k<f.length;k++)h[k]=f[k];return h}return Array.from(f)}"use strict";"use strict";u.register("SocialShareWidget",function(){var f;(function(){var k={353:function(f,a,r){Object.defineProperty(a,"__esModule",{value:!0});
var c=r(905),e=r(738);f=function(){function a(){var y=this;this.generateTimestampCollection=function(){var a=(new Date).getTimezoneOffset();a=y.getDateTimeByOffset(a);var d=y.getDateTimeByOffset(0);return{hitDay:a.split("T")[0],hitDatetime:a,hitDatetimeUtc:d}};this.getMarketplaceId=function(a){return"string"==typeof a?a:h.ue&&h.ue.mid?h.ue.mid:e.CSA_DEFAULT_VALUE.string};var d=this.generateTimestampCollection();this.csaMetricsData={schemaId:a.CSA_SCHEMA_ID,userAgentId:e.CSA_DEFAULT_VALUE.number,hitDay:d.hitDay,
hitDatetime:d.hitDatetime,hitDatetimeUtc:d.hitDatetimeUtc,pageType:h.ue_pty?h.ue_pty:e.CSA_DEFAULT_VALUE.string,subPageType:h.ue_spty?h.ue_spty:e.CSA_DEFAULT_VALUE.string,sessionId:h.ue&&h.ue.sid?h.ue.sid:e.CSA_DEFAULT_VALUE.string}}return a.prototype.withCSAClickEventData=function(a){var d=a.shareDataAttributes;if(this.csaMetricsData.customerId=d.customerId?d.customerId:e.CSA_DEFAULT_VALUE.string,this.csaMetricsData.httpRequestId=d.requestId?d.requestId:e.CSA_DEFAULT_VALUE.string,this.csaMetricsData.asin=
d.asin?d.asin:e.CSA_DEFAULT_VALUE.string,this.csaMetricsData.ingress=d.ingress?d.ingress:e.CSA_DEFAULT_VALUE.string,this.csaMetricsData.platform=d.platform?d.platform:e.CSA_DEFAULT_VALUE.string,this.csaMetricsData.isInternal=this.getCSANumberMapping(d.isInternal),this.csaMetricsData.isRobot=this.getCSANumberMapping(d.isRobot),this.csaMetricsData.channel=a.channel?a.channel:e.CSA_DEFAULT_VALUE.string,this.csaMetricsData.refMarker=a.refMarker?a.refMarker:e.CSA_DEFAULT_VALUE.string,this.csaMetricsData.referrerUrl=
a.refererURL?a.refererURL:e.CSA_DEFAULT_VALUE.string,this.csaMetricsData.marketplaceId=this.getMarketplaceId(d.marketplaceId),this.csaMetricsData.isExperiment=/T\d+/.test(a.treatment)?"Y":"N",this.csaMetricsData.triggeredFromScreenshotToast=!!d.triggeredFromScreenshotToast&&d.triggeredFromScreenshotToast,a.weblab)d=this.csaMetricsData.shareEntities,(d=void 0===d?{}:d)[a.weblab]=a.treatment,this.csaMetricsData.shareEntities=d;a.customizeShareCSAData&&(d=this.csaMetricsData.shareEntities,d=void 0===
d?{}:d,a.customizeShareCSAData.isCustomizedExperienceEnabled===e.TRUE&&(d.backgroundImagePhysicalId=a.customizeShareCSAData.backgroundImagePhysicalId,d.deviceCoverImagePhysicalId=a.customizeShareCSAData.deviceCoverImagePhysicalId,d.hasQuote=a.customizeShareCSAData.hasQuote,d.isCustomized=a.customizeShareCSAData.isCustomized,d.customizePreSelected=a.customizeShareCSAData.customizePreSelected,d.isQuotesAvailable=a.customizeShareCSAData.isQuotesAvailable,this.csaMetricsData.shareEntities=d));a.isCustomShareOptionsSheetEnabled&&
(d=this.csaMetricsData.shareEntities,(d=void 0===d?{}:d).isCustomShareOptionsSheetEnabled="1",this.csaMetricsData.shareEntities=d);a.caf&&(d=this.csaMetricsData.shareEntities,(d=void 0===d?{}:d).cafSwitchEnabled=a.cafSwitchEnabled?e.TRUE:e.FALSE,this.csaMetricsData.shareEntities=d);a.cafEdCXIngressWeblabTreatment&&(d=this.csaMetricsData.shareEntities,(d=void 0===d?{}:d).cafEdCxIngressWelabT1="T1"===a.cafEdCXIngressWeblabTreatment?e.TRUE:e.FALSE,d.cafEdCxIngressWelabT2="T2"===a.cafEdCXIngressWeblabTreatment?
e.TRUE:e.FALSE);return this},a.prototype.withShareHitType=function(a){return this.csaMetricsData.shareHitType=a||e.CSA_DEFAULT_VALUE.string,this},a.prototype.getCSANumberMapping=function(a){return isNaN(Number(a))?2:Number(a)},a.prototype.getDateTimeByOffset=function(b){var d=new Date;0!==b&&(b*=a.MINUTES_TO_MILISECONDS,d=d.getTime()-b,d=new Date(d));return d.toISOString().split("Z")[0].split(".")[0]},a.prototype.logEvent=function(){(0,c.isCSALoaded)()&&h.csa(a.CSAPluginId,{producerId:a.CSA_PRODUCER_ID})(a.CSA_LOG_EVENT,
this.csaMetricsData)},a.MINUTES_TO_MILISECONDS=6E4,a.CSAPluginId="Events",a.CUSTOMIZE_SHARE_ENTITY_NAME="CustomizeShare",a.CSA_PRODUCER_ID="social-share",a.CSA_LOG_EVENT="log",a.CSA_SCHEMA_ID="SocialShareCSACustomEvent.CSAShareMetrics.8",a}();a.default=f},305:function(f,a){Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a,c){var e={email:{label:"Email",name:"email",ref:"em",shareBaseUrl:"mailto:",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","email-circular.svg"),
imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","email-squared.svg"),canOpenInPopup:!1,getSharingUrl:function(b){var d="?subject\x3d".concat(encodeURIComponent(a.emailSubject||a.title)),c="\x26body\x3d".concat(encodeURIComponent(a.title));b=encodeURIComponent(b||a.shareUrl.getReturnForChannel(this.ref));return"".concat(this.shareBaseUrl).concat(d).concat(c," ").concat(b)}},pi:{label:"Pinterest",name:"pinterest",ref:"pi",shareBaseUrl:"https://www.pinterest.com/pin/create/button/",
image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","pinterest-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","pinterest-squared.svg"),canOpenInPopup:!0,getSharingUrl:function(b){b="?url\x3d".concat(encodeURIComponent(b||a.shareUrl.getReturnForChannel(this.ref)));var d="\x26description\x3d".concat(encodeURIComponent(a.title)),c="\x26media\x3d".concat(encodeURIComponent(a.image));return"".concat(this.shareBaseUrl).concat(b).concat(d).concat(c,
"\x26method\x3dbutton")}},li:{label:"Line",name:"line",ref:"li",shareBaseUrl:"https://social-plugins.line.me/lineit/share",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","line-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","line-squared.svg"),canOpenInPopup:!0,getSharingUrl:function(b){var d="?text\x3d".concat(encodeURIComponent(a.text)," ").concat(encodeURIComponent(a.title));b="\x26url\x3d".concat(encodeURIComponent(b||a.shareUrl.getReturnForChannel(this.ref)));
return"".concat(this.shareBaseUrl).concat(d).concat(b)}},fb:{label:"Facebook",name:"facebook",ref:"fa",shareBaseUrl:"https://www.facebook.com/dialog/share",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","facebook-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","facebook-squared.svg"),canOpenInPopup:!0,getSharingUrl:function(b){b=encodeURIComponent(b||a.shareUrl.getReturnForChannel(this.ref));var d=encodeURIComponent(a.shareUrl.getReturnForChannel(this.ref).replace("_r_",
"_s_")),c=encodeURIComponent("#"+(a.hashtags[0]||"Amazon"));b=["?_encoding\x3dUTF8\x26app_id\x3d465632727431967\x26display\x3dpopup","href\x3d".concat(b),"redirect_uri\x3d".concat(d),"hashtag\x3d".concat(c)].join("\x26");return"".concat(this.shareBaseUrl).concat(b)}},tw:{label:"X",name:"x",ref:"tw",shareBaseUrl:"https://twitter.com/intent/tweet",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","x-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/",
"x-squared.svg"),canOpenInPopup:!0,getSharingUrl:function(b){var d="?text\x3d".concat(encodeURIComponent(a.title));b="\x26url\x3d".concat(encodeURIComponent(b||a.shareUrl.getReturnForChannel(this.ref)));var c="\x26hashtags\x3d".concat(a.hashtags.join(",")),e="\x26via\x3d".concat(encodeURIComponent("Amazon"));return"".concat(this.shareBaseUrl).concat(d).concat(b).concat(c).concat(e)}},wa:{label:"WhatsApp",name:"whatsapp",ref:"wa",shareBaseUrl:"https://api.whatsapp.com/send?text\x3d",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/",
"whatsapp-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","whatsapp-squared.svg"),canOpenInPopup:!0,getSharingUrl:function(b){b="\n              ".concat(encodeURIComponent(a.title),"\n              ").concat(encodeURIComponent(a.text),"\n              ").concat(encodeURIComponent(b||a.shareUrl.getReturnForChannel(this.ref)));return"".concat(this.shareBaseUrl).concat(b)}},sms:{label:"SMS",name:"sms",ref:"sms",shareBaseUrl:"sms:",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/",
"sms-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","sms-squared.svg"),canOpenInPopup:!1,getSharingUrl:function(b){b="\n              ".concat(encodeURIComponent(a.title),"\n              ").concat(encodeURIComponent(b||a.shareUrl.getReturnForChannel(this.ref)));return"".concat(this.shareBaseUrl).concat(b)}},embed:{label:"Embed",name:"embed",ref:"eb",shareBaseUrl:"",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","embed-circular.svg"),
imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","embed-squared.svg"),canOpenInPopup:!1,getSharingUrl:function(){return""}},copy:{label:"Copy",name:"copy",ref:"cp",shareBaseUrl:"",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","link-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","link-squared.svg"),canOpenInPopup:!1,getSharingUrl:function(){return""}}};if(null==c?0:c.length){var b={};return c.forEach(function(a){e[a]&&
(b[a]=e[a])}),b}return e}},738:function(f,a){Object.defineProperty(a,"__esModule",{value:!0});a.Err={Abort:"AbortError"};f=a.CSA_HIT_TYPE={};f.CLICK_SUCCESS="click_success";f.CLICK_ERROR="click_error";f.CLICK_CANCEL="click_cancel";f.SHARE="share";f.CUSTOMIZE_SHARE="click_customize_success";a.customize="customize";a.customShareOptions="customShareOptions";a.customizeShareStateKey="customizeShareCSAData";a.CSA_DEFAULT_VALUE={string:"unknown",number:0,boolean:2};a.CAF_LEARN_MORE_KEY="learn_more_link";
a.CAF_INFO_ICON_KEY="info_icon";a.UNKNOWN="unknown";a.DEFAULT_CSA_REF_ID="u_";a.EMPTY_STRING="";a.RAW_CHANNEL_PREFIX="raw:";a.CP_CHANNEL_REF="cp";a.CUSTOM_SHARE_OPTIONS_CP_CHANNEL_REF="cso_cp";a.CUSTOM_SHARE_OPTIONS_REF_PREFIX="cso";a.BOOKS_REF_PREFIX="bks";a.BOOKS_CUSTOMIZE_PREVIEW_NOT_AVAILABLE="t2cna";a.CAF_REF_PREFIX="caf";a.EMBED_CHANNEL_REF="eb";a.BEST_FORMAT_REF="ffobk";a.FALSE="false";a.TRUE="true";a.CUSTOM_SHEET_CLICK_LATENCY_METRIC="CustomShareSheet.Click";a.CAF_CUSTOM_SHEET_CLICK_LATENCY_METRIC=
"Caf.CustomShareSheet.Click";a.BOOKS_CUSTOM_SHEET_CLICK_LATENCY_METRIC="Books.CustomShareSheet.Click";a.SSF_AUI_PACKAGE_ATTRIBUTION="SocialShareWidgetAUI";a.REGEX_TO_REF_ID_AND_CHANNEL_APP={instagram:{refId:"in",channel:"Instagram"},snap:{refId:"sn",channel:"Snapchat"},discord:{refId:"di",channel:"Discord"},viber:{refId:"vi",channel:"Viber"},telegram:{refId:"te",channel:"Telegram"},pinterest:{refId:"pi",channel:"Pinterest"},qzone:{refId:"qz",channel:"QQ Zone"},renren:{refId:"re",channel:"Renren"},
twitter:{refId:"tw",channel:"Twitter"},airdrop:{refId:"ar",channel:"AirDrop"},tencentweibo:{refId:"tc",channel:"Tencent Weibo"},wechatmoment:{refId:"wm",channel:"WeChat Moment"},line:{refId:"li",channel:"Line"},whatsapp:{refId:"wa",channel:"Whatsapp"},weibo:{refId:"si",channel:"Sina Weibo"},facebook:{refId:"fb",channel:"Facebook"}};a.defaultShareDataAttributes={isInternal:a.CSA_DEFAULT_VALUE.boolean,isRobot:a.CSA_DEFAULT_VALUE.boolean,userAgent:a.CSA_DEFAULT_VALUE.number,platform:a.CSA_DEFAULT_VALUE.string,
ingress:a.CSA_DEFAULT_VALUE.string,asin:a.CSA_DEFAULT_VALUE.string,requestId:a.CSA_DEFAULT_VALUE.string,customerId:a.CSA_DEFAULT_VALUE.string,marketplaceId:a.CSA_DEFAULT_VALUE.string};a.defaultCustomizeShareCSAData={backgroundImagePhysicalId:a.EMPTY_STRING,deviceCoverImagePhysicalId:a.EMPTY_STRING,hasQuote:a.EMPTY_STRING,isCustomizedExperienceEnabled:a.EMPTY_STRING,isCustomized:a.EMPTY_STRING}},905:function(f,a,r){Object.defineProperty(a,"__esModule",{value:!0});a.isSafari=a.isCSALoaded=a.isNativeAppShareAvailable=
a.isNativeWebShareAvailable=a.isMobileWeb=a.isMobileApp=a.isDesktop=a.isIpadIOS=a.isIOS=a.isAndroid=a.isIE=a.isAUILoaded=a.isUeAvailable=a.isClipboardAvailable=a.isRTL=a.isTwisterAsin=a.context=a.Device=void 0;var c,e=r(161);!function(a){a.Android="apan";a.IOS="apin";a.MWeb="mwn";a.Other="ud"}(c||(a.Device=c={}));a.context=function(){var b=c.Other;(0,a.isMobileApp)()&&(0,a.isAndroid)()?b=c.Android:(0,a.isMobileApp)()&&(0,a.isIOS)()?b=c.IOS:(0,a.isMobileWeb)()&&(b=c.MWeb);var d="unknown";return(0,
a.isMobileApp)()?d="mshop":(0,a.isMobileWeb)()?d="mweb":(0,a.isDesktop)()&&(d="desktop"),{device:b,page:(0,a.isUeAvailable)()?h.ue_pty:"unknown",subPage:(0,a.isUeAvailable)()?h.ue_spty||h.ue_pti:"unknown",platform:d}};a.isTwisterAsin=function(){return!!h.isTwisterPage||!!h.twisterController||b};a.isRTL=function(){return"rtl"===document.dir};a.isClipboardAvailable=function(){return!!navigator.clipboard&&(0,e.isFunction)(navigator.clipboard.writeText)};a.isUeAvailable=function(){return!!h.ue};a.isAUILoaded=
function(){var a;return"undefined"!=typeof h&&(0,e.isString)(null===(a=null===h||void 0===h?void 0:h.P)||void 0===a?void 0:a.AUI_BUILD_DATE)};a.isIE=function(){return(0,e.testUserAgent)(/MSIE|Trident/i)};a.isAndroid=function(){return(0,e.testUserAgent)(/android.([1-9]|[L-Z])/i)&&!(0,e.testUserAgent)(/trident|Edge/i)};a.isIOS=function(){return(0,e.testUserAgent)(/OS [1-9][0-9]*(_[0-9]*)+ like Mac OS X/i)&&!(0,e.testUserAgent)(/trident|Edge/i)};a.isIpadIOS=function(){return(0,e.testUserAgent)(/[a-zA-z]{1,}\/[0-99].[0-99] \(Macintosh; [a-zA-z]{1,} Mac OS X [1-9][0-9]*_[1-9][0-9]*_[1-9][0-9]*\) AppleWebKit\/[1-9][0-9]*.[1-9][0-9]*.[1-9][0-9]*/)||
(0,e.testUserAgent)(/iPad/)};a.isDesktop=function(){return!((0,a.isAndroid)()||(0,a.isIOS)()||(0,a.isMobileApp)()||(0,a.isMobileWeb)())};a.isMobileApp=function(){return/(Windowshop|Amazon|Amazon\.com)\//.test((0,e.getCookie)("amzn-app-id"))};a.isMobileWeb=function(){return 450>=h.screen.availWidth&&((0,e.testUserAgent)(/mobile|mini/i)||(0,a.isAndroid)()||(0,a.isIOS)())};a.isNativeWebShareAvailable=function(){return h.navigator&&(0,e.isFunction)(h.navigator.share)};a.isNativeAppShareAvailable=function(a){return a&&
(0,e.isFunction)(a.share)};a.isCSALoaded=function(){return(0,e.isFunction)(h.csa)};a.isSafari=function(){var a;return/apple/i.test(null===(a=h.navigator)||void 0===a?void 0:a.vendor)};var b=!1;(0,a.isAUILoaded)()&&h.P.when("mobile-inline-twister-critical").execute(function(){b=!0});a.default={context:a.context,isTwisterAsin:a.isTwisterAsin,isClipboardAvailable:a.isClipboardAvailable,isUeAvailable:a.isUeAvailable,isAUILoaded:a.isAUILoaded,isIE:a.isIE,isAndroid:a.isAndroid,isDesktop:a.isDesktop,isIOS:a.isIOS,
isIpadIOS:a.isIpadIOS,isMobileApp:a.isMobileApp,isMobileWeb:a.isMobileWeb,isNativeWebShareAvailable:a.isNativeWebShareAvailable,isNativeAppShareAvailable:a.isNativeAppShareAvailable,isCSALoaded:a.isCSALoaded,isSafari:a.isSafari,isRTL:a.isRTL}},495:function(f,a,r){Object.defineProperty(a,"__esModule",{value:!0});var c=r(905),e=r(353),b=r(738);f=function(){function a(){}return a.logCountOnce=function(a){(0,c.isUeAvailable)()&&h.ue.count(a,(h.ue.count(a)||0)+1)},a.emitFullMetricName=function(a,b,e){var d=
this;(0,c.isAUILoaded)()&&h.P.when("A").execute(function(c){c.trigger("".concat(d.BASE_METRIC_NAME,":metrics:logged"),{fullMetricName:a,callee:b,message:e})})},a.logCounter=function(a,b){b=b?".".concat(b):"";a="".concat(this.BASE_METRIC_NAME,".").concat(a).concat(b);this.emitFullMetricName(a,"logCounter");this.logCountOnce(a)},a.logCounterRefactor=function(a,b){b=b?".".concat(b.toLowerCase()):"";a="".concat(this.BASE_METRIC_NAME).concat(b,".").concat(this.platform).concat(this.metricName,".").concat(a.toLowerCase());
this.emitFullMetricName(a,"logCounterRefactor");this.logCountOnce(a)},a.logLoad=function(a){a="".concat(this.BASE_METRIC_NAME,".").concat(this.platform).concat(this.metricName,".").concat(a.toLowerCase());this.logCountOnce(a)},a.logFatal=function(a){(0,c.isAUILoaded)()&&h.P.log(a,"FATAL",this.BASE_METRIC_NAME)},a.logCSAEvent=function(a,b){(0,c.isCSALoaded)()&&(new e.default).withCSAClickEventData(b).withShareHitType(a).logEvent()},a.startTimer=function(a){a="".concat(this.BASE_METRIC_NAME,".").concat(this.LATENCY,
".").concat(a);this.timers[a]=h.uet&&h.uet("bb",a,{wb:1})},a.stopTimer=function(a){a="".concat(this.BASE_METRIC_NAME,".").concat(this.LATENCY,".").concat(a);var b=this.timers[a];(0,c.isUeAvailable)()&&b&&(b=h.uet("be",a,{wb:1})-b,h.ue.count(a,b),h.uex&&h.uex("ld",a,{wb:1}),this.emitFullMetricName(a,"stopTimer","".concat(b,"ms")),delete this.timers[a],this.timers["".concat(a,"_done_in")]=b)},a.BASE_METRIC_NAME="SocialShareFramework",a.LATENCY="Latency",a.platform=b.UNKNOWN,a.metricName="",a.timers=
{},a.getMetricName=function(b,e){var d;if(void 0===e&&(e=""),(0,c.isUeAvailable)()){var n=(0,c.context)();a.platform=n.platform;a.metricName=e?".".concat(e.toLowerCase()):""}b=b('[data-action\x3d"ssf-share-icon"]').data();e=e?".".concat(e):"";return b?(b=(null===(d=b.ssfShareIcon)||void 0===d?void 0:d.shareDataAttributes)||{},d=b.ingress,b=b.platform,b=void 0===b?"unknown":b,"".concat(void 0===d?"unknown":d,".").concat(b).concat(e).toLowerCase()):""},a}();a.default=f},241:function(f,a,r){Object.defineProperty(a,
"__esModule",{value:!0});var c,e=r(905),b=r(738);!function(a){a.RETURN="r";a.CLICK="cl"}(c||(c={}));f=function(){function a(a,c){if(void 0===a&&(a="ur"),void 0===c&&(c=void 0),this.PREFIX="cm_sw",this.id="",this.refId="",this._isBestFormatEnabled=!1,this.cxt={device:e.Device.Other,page:"",subPage:"",platform:b.UNKNOWN},2>a.length)throw new TypeError("refId must be 2 or more characters long");this.refId=a;this.cxt=(0,e.context)();this.treatment=c;this.generateUniqueId()}return Object.defineProperty(a.prototype,
"isBestFormatEnabled",{set:function(a){this._isBestFormatEnabled=a},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"return",{get:function(){return this.get(c.RETURN)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"click",{get:function(){return this.get(c.CLICK)},enumerable:!1,configurable:!0}),a.prototype.getReturnForChannel=function(a){var d,e=null!==(d=this.treatment)&&void 0!==d?d:"";return[this.PREFIX,c.RETURN,this._isBestFormatEnabled?b.BEST_FORMAT_REF:
"",a,this.cxt.device,this.refId,e,this.id].filter(function(a){return a&&""!==a}).join("_")},a.prototype.getClickForChannel=function(a){return[this.PREFIX,c.CLICK,this._isBestFormatEnabled?b.BEST_FORMAT_REF:"",a,this.cxt.device,this.refId,this.id].filter(function(a){return a&&""!==a}).join("_")},a.prototype.generateUniqueId=function(){var a,b=null===(a=null===h||void 0===h?void 0:h.ue)||void 0===a?void 0:a.rid;return b||(b="".concat(Math.random().toString(36).slice(2)).concat(Math.random().toString(36).slice(2)).substring(0,
13)),this.id=b},a.prototype.get=function(a){var c,d=null!==(c=this.treatment)&&void 0!==c?c:"";return[this.PREFIX,a,this._isBestFormatEnabled?b.BEST_FORMAT_REF:"",this.cxt.device,this.refId,d,this.id].filter(function(a){return a&&""!==a}).join("_")},a}();a.default=f},198:function(f,a,r){var c=this&&this.__assign||function(){return c=Object.assign||function(a){for(var b,g=1,c=arguments.length;g<c;g++)for(var d in b=arguments[g])Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},c.apply(this,
arguments)};Object.defineProperty(a,"__esModule",{value:!0});var e,b=r(495),k=r(905),d=r(474),l=r(161),q=r(738);(0,k.isAUILoaded)()&&h.P.when("mash").execute(function(a){return e=a});f=function(){function a(a){this.sheetOptions={title:q.EMPTY_STRING,text:q.EMPTY_STRING,shareUrl:new d.default("http://amazon.com/","ur"),lang:"en",shareDataAttributes:q.defaultShareDataAttributes,refererURL:"",image:"",customizeShareCSAData:q.defaultCustomizeShareCSAData,isCustomShareOptionsSheetEnabled:!1};this.sheetOptions=
c(c({},this.sheetOptions),a);this.shareUrl=a.shareUrl}return a.prototype.launchNativeWeb=function(){var a,g=this,c=this.sheetOptions.shareDataAttributes.ingress,d={channel:q.EMPTY_STRING,refMarker:this.shareUrl.refMarker.click,refererURL:this.sheetOptions.refererURL,shareDataAttributes:this.sheetOptions.shareDataAttributes,customizeShareCSAData:this.sheetOptions.customizeShareCSAData},e=this.shareUrl.return;this.sheetOptions.tinyUrl&&(e=this.sheetOptions.tinyUrl,b.default.logCounter("MWeb.Tiny.Success"),
b.default.logCounterRefactor("Tiny.Success",c));var f=(0,l.isFunction)(this.sheetOptions.sheetShownCallback);try{null===(a=null===h||void 0===h?void 0:h.navigator)||void 0===a||a.share({url:e,title:this.sheetOptions.title,text:this.sheetOptions.text}).then(function(){f&&g.sheetOptions.sheetShownCallback();b.default.logCSAEvent(q.CSA_HIT_TYPE.CLICK_SUCCESS,d);b.default.logCSAEvent(q.CSA_HIT_TYPE.SHARE,d);(0,l.isFunction)(g.sheetOptions.incrementShareCount)&&g.sheetOptions.incrementShareCount(d.refMarker);
b.default.logCounterRefactor("ChannelClick",g.sheetOptions.shareDataAttributes.ingress);b.default.logCounter("ShareClick")}).catch(function(a){f&&g.sheetOptions.sheetShownCallback();b.default.logCSAEvent(q.CSA_HIT_TYPE.CLICK_SUCCESS,d);a.name===q.Err.Abort&&b.default.logCSAEvent(q.CSA_HIT_TYPE.CLICK_CANCEL,d)})}catch(D){b.default.logCSAEvent(q.CSA_HIT_TYPE.CLICK_ERROR,d)}},a.prototype.launchNativeApp=function(){var a=this,g=this.shareUrl.refMarker.click,d=this.sheetOptions.shareDataAttributes,f=this.sheetOptions.refererURL,
w=this.sheetOptions.customizeShareCSAData,r=this.sheetOptions.shareDataAttributes.ingress,n=q.EMPTY_STRING,m=this.sheetOptions.caf||!1,k=this.sheetOptions.cafSwitchEnabled||!1,h=this.sheetOptions.isCustomShareOptionsSheetEnabled||!1,y=this.shareUrl.return,x=(0,l.isFunction)(this.sheetOptions.incrementShareCount);this.sheetOptions.tinyUrl&&(y=this.sheetOptions.tinyUrl,b.default.logCounter("MShop.Tiny.Success"),b.default.logCounterRefactor("Tiny.Success",r));var z={channel:n,refMarker:g,refererURL:f,
shareDataAttributes:d,customizeShareCSAData:w,caf:m,cafSwitchEnabled:k,isCustomShareOptionsSheetEnabled:h};d={messagePlain:this.getShareMessage,messagePlain160:this.getShare160Message,messagePlain140:this.getShare140Message,messageHTML:this.getShareMessage,url:y,imageURL:this.sheetOptions.image,subject:this.sheetOptions.text};null==e||e.share(c(c({},d),{successCallback:function(){(0,l.isFunction)(a.sheetOptions.sheetShownCallback)&&a.sheetOptions.sheetShownCallback();b.default.logCSAEvent(q.CSA_HIT_TYPE.CLICK_SUCCESS,
z)},failCallback:function(){b.default.logCSAEvent(q.CSA_HIT_TYPE.CLICK_ERROR,z)},shareServiceSelectedCallback:function(c){c&&"'null'"!==c?((0,l.isFunction)(a.sheetOptions.channelSelectCB)&&a.sheetOptions.channelSelectCB(c),z.channel=a.getChannelByKeyword(c).channel,c=a.getChannelByKeyword(c).refId,z.refMarker=a.shareUrl.refMarker.getClickForChannel(c),b.default.logCSAEvent(q.CSA_HIT_TYPE.SHARE,z),b.default.logCounterRefactor("ChannelClick",a.sheetOptions.shareDataAttributes.ingress),b.default.logCounter("ShareClick"),
(0,l.isFunction)(a.sheetOptions.sdTooltipCallback)&&a.sheetOptions.sdTooltipCallback(),x&&a.sheetOptions.incrementShareCount(g)):("MSHOP_ANDROID"===a.sheetOptions.shareDataAttributes.platform&&x&&a.sheetOptions.incrementShareCount(g),b.default.logCSAEvent(q.CSA_HIT_TYPE.CLICK_CANCEL,z))}}))},a.prototype.launch=function(a){(0,k.isNativeAppShareAvailable)(e)?this.launchNativeApp():(0,k.isNativeWebShareAvailable)()?this.launchNativeWeb():(0,l.isFunction)(a)?a():(b.default.logCounter("Click.ShareUnavailable"),
b.default.logCounterRefactor("Click.ShareUnavailable",this.sheetOptions.shareDataAttributes.ingress))},Object.defineProperty(a.prototype,"getShare160Message",{get:function(){var a=this.sheetOptions.tinyUrl||this.shareUrl.return,b=a.length+2;b=(0,l.truncate)(this.sheetOptions.title,160-b);return"".concat(b," ").concat(a)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"getShare140Message",{get:function(){var a=this.sheetOptions.tinyUrl||this.shareUrl.return,b=a.length+2;b=(0,l.truncate)(this.sheetOptions.title,
140-b);return"".concat(b," ").concat(a)},enumerable:!1,configurable:!0}),a.prototype.getRefByRegex=function(a){return q.REGEX_TO_REF_ID_AND_CHANNEL_APP[a].refId},a.prototype.getChannelByRegex=function(a){return q.REGEX_TO_REF_ID_AND_CHANNEL_APP[a].channel},a.prototype.getChannelByKeyword=function(a){var b=q.RAW_CHANNEL_PREFIX+a,c=q.DEFAULT_CSA_REF_ID,d=a.match(/instagram|snap|discord|viber|telegram|pinterest|qzone|renren|twitter|airdrop|tencentweibo|wechatmoment|line|whatsapp|weibo|^Facebook$/ig);
if(d&&d.length)return{channel:this.getChannelByRegex(d[0].toLowerCase()),refId:this.getRefByRegex(d[0].toLowerCase())};switch(!0){case /android.messaging|sms|android.apps.messaging|mms/gi.test(a):b="SMS";c="sm";break;case /outlook|mail/gi.test(a):b="Email";c="em";break;case /clipboardactivity|copy/gi.test(a):b="Copy";c="cp";break;case /facebook.composer/gi.test(a):b="Facebook";c="fb";break;case /facebook.messenger|FacebookMessenger/gi.test(a):b="FacebookMessenger";c="fm";break;case /tencent|wechat/gi.test(a):b=
"WeChat";c="we";break;case /unknown|null/gi.test(a):b="unknown",c="u"}return{channel:b,refId:c}},Object.defineProperty(a.prototype,"getShareMessage",{get:function(){var a=this.sheetOptions.tinyUrl||this.shareUrl.return;return"".concat(this.sheetOptions.title," ").concat(a)},enumerable:!1,configurable:!0}),a}();a.default=f},474:function(f,a,r){Object.defineProperty(a,"__esModule",{value:!0});var c=r(241);f=function(){function a(b,e,d){this.REF_PARAM_NAME="ref_";a.isValid(b)||(b=a.getDefault());this.url=
new URL(b);this._refMarker=new c.default(e,d)}return a.prototype.getUpdatedUrl=function(a){var b=new URL(this.raw);return b.searchParams.set(this.REF_PARAM_NAME,a),b.toString()},Object.defineProperty(a.prototype,"raw",{get:function(){return this.url.toString()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"refMarker",{get:function(){return this._refMarker},enumerable:!1,configurable:!0}),a.isValid=function(a){try{new URL(a)}catch(y){return!1}return!0},a.getDefault=function(){var a,
c,d=null===(a=null===h||void 0===h?void 0:h.location)||void 0===a?void 0:a.href;if(!d)return(null===(c=null===h||void 0===h?void 0:h.ue)||void 0===c?0:c.sn)?"https://".concat(h.ue.sn):"https://amazon.com";a=new URL(d);c=a.searchParams.has("psc")?"?psc\x3d1":"";return h.ue_pti?"".concat(h.location.origin,"/dp/").concat(h.ue_pti).concat(c):(a.search=c,a.href)},a.prototype.getReturnForChannel=function(a){a=this._refMarker.getReturnForChannel(a);return this.getUpdatedUrl(a)},a.prototype.getClickForChannel=
function(a){a=this._refMarker.getClickForChannel(a);return this.getUpdatedUrl(a)},Object.defineProperty(a.prototype,"return",{get:function(){return this.getUpdatedUrl(this._refMarker.return)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"click",{get:function(){return this.getUpdatedUrl(this._refMarker.click)},enumerable:!1,configurable:!0}),a}();a.default=f},161:function(f,a){Object.defineProperty(a,"__esModule",{value:!0});a.getDPXObject=a.getCookie=a.testUserAgent=a.truncate=
a.isString=a.isEmpty=a.isNumber=a.isFunction=void 0;a.isFunction=function(a){return"function"==typeof a};a.isNumber=function(a){return!isNaN(a)&&"number"==typeof a};a.isEmpty=function(a){return!a||!a.length};a.isString=function(a){return"string"==typeof a};a.truncate=function(a,c){void 0===a&&(a="");var e=Array(3).fill(".");return a.length>c?a.substring(0,c-3)+e.join(""):a};a.testUserAgent=function(a){if(!h&&!h.navigator)return!1;try{return a.test(h.navigator.userAgent)}catch(c){return!1}};a.getCookie=
function(a){a="".concat(a,"\x3d");for(var c=document.cookie.split(";"),e=0;e<c.length;e++){for(var b=c[e];" "==b.charAt(0);)b=b.substring(1);if(0==b.indexOf(a))return b.substring(a.length,b.length)}return""};a.getDPXObject=function(){var a,c;return null===(c=null===(a=h.DetailPage)||void 0===a?void 0:a.StateController)||void 0===c?void 0:c.state};a.default={isFunction:a.isFunction,isNumber:a.isNumber,isEmpty:a.isEmpty,isString:a.isString,truncate:a.truncate,testUserAgent:a.testUserAgent,getCookie:a.getCookie,
getDPXObject:a.getDPXObject}},156:function(f,a){Object.defineProperty(a,"__esModule",{value:!0});a.default={}},519:function(f,a,k){Object.defineProperty(a,"__esModule",{value:!0});a.SocialShareCore=void 0;f=k(305);var c=k(474),e=k(156),b=k(495),l=k(198),d=k(241),r=k(905);k=k(738);a.SocialShareCore={Channels:f.default,Url:c.default,Translations:e.default,Metrics:b.default,ShareSheet:l.default,RefMarker:d.default,Detection:r.default,Constants:k};a.default=a.SocialShareCore}},C={};f=function r(a){var c=
C[a];if(void 0!==c)return c.exports;c=C[a]={exports:{}};return k[a].call(c.exports,c,c.exports,r),c.exports}(519)})();return f});"use strict";u.register("SocialShareWidgetConfig",function(){var f=Object.freeze({MODAL:"modal",POPOVER:"popover"}),k=Object.freeze({IOS:"ios",ANDROID:"android",ARROW:"arrow",VARIABLE:"variable"});return{WIDGET_TYPE:f,WIDGET_ICON:k,excludedChannels:["sms","wa"],lineMarketplaces:["A1VC38T7YXB528"],cnMarketplace:["AAHKV2X7AFYLW"],nonCNChannels:["fb","tw","pi"],defaultShareData:{url:"",
title:location.hostname,text:"",image:"",hashtags:["Amazon"],type:f.POPOVER,lang:"en",refId:"ts",channels:[],refererURL:"",treatment:"",weblab:"",customize:!1,previewDoh:!1,caf:!1,displayCustomShareSheet:!1,cafSwitch:!1,cafStarAlignmentLeft:!1,eventPreviewTreatment:"C",cafCustomShareOptionsEnabled:!1,cafIngressId:"",t:{},associateLink:{},popoverPosition:"triggerBottom",popoverDistance:48,defaultCustomShareOptions:{email:{label:"Email",image:"customchannels-email.png",ref:"em",shareUrl:"mailto:?subject\x3d{subject}\x26body\x3d{body}\x26url\x3d{url}",
className:"email",stringId:"taf_customshare_email"},copy:{label:"Copy",image:"customchannels-link.png",ref:"cp",shareUrl:"",className:"custom-share-copy",stringId:"taf_customshare_copy"},more:{label:"More",image:"customchannels-more.png",ref:"",shareUrl:"",className:"custom-share-native-sheet",stringId:"taf_customshare_more"}},isFallbackShareUrlEnabled:!1,isNewIMessagePreviewGating:!1,isOnShareGatingEnabled:!1,isIpadFixesEnabled:!1,isNewWhatsAppPreview:!1,skipTwisterAPI:"C",isBestFormatEnabled:!1,
isCafPreviewGenerationMigrationEnabled:!1,isUnrecognizedUsersRichPreviewEnabled:!1,customizePreSelected:!1,isAndroidCopyLinkGatingEnabled:!1,isUnsignedShareSheetGatingEnabled:!1,isUnsignedShareSheetCopyLinkOverrideEnabled:!1},defaultWidgetData:{icon:k.VARIABLE,background:!0,width:24},shareDataAttributes:{isInternal:2,isRobot:2,userAgent:h.navigator.userAgent,platform:"DESKTOP",ingress:h.ue_pty,asin:h.ue_pti,requestId:h.ue_id,customerId:"",marketplaceId:h.ue_mid,triggeredFromScreenshotToast:!1},iconMap:{ios:"https://m.media-amazon.com/images/G/01/share-icons/share-std.svg",
android:"https://m.media-amazon.com/images/G/01/share-icons/share-android.svg",arrow:"https://m.media-amazon.com/images/G/01/share-icons/share-icon-experiment.svg"},customShareOptions:[]}});"use strict";u.when("A","SocialShareWidget","SocialShareWidgetTemplating","SocialShareWidgetConfig","SocialShareWidgetState").register("SocialShareWidgetAUI",function(f,t,C,l,a){var r=t.SocialShareCore,c=r.Metrics,e=0,b=function(){},y=!1,d=c.getMetricName(f.$),B=f.constants.HIDE_CLASS;c.startTimer(d);c.logCounter("DPX.Desktop.ImageBlockRender");
try{(function(){var q=f.$,n=r.Detection,v=r.Translations,g=r.Channels,p=r.ShareSheet,A=r.Url,w=r.Constants,J=function(a){a=a.data("share")||a.find("[data-share]").data("share");return f.extend({},l.defaultWidgetData,a)},D=q(".ssf-share-trigger"),m=l.defaultShareData,t=J(D),T=m.url,L=q("#ac-getlink-bottomsheet"),x=q('[data-action\x3d"ssf-share-icon"]'),z=function(){var a=l.iconMap;if(t.icon===l.WIDGET_ICON.ARROW)return a.arrow;if(n.isDesktop())return a.ios;if(t.icon===l.WIDGET_ICON.VARIABLE){var b=
f.$("#ssf-primary-widget-desktop");m=f.extend(m,b.data("ssfShareIcon"));b=a.android;if(n.isIOS()||m.isIpadFixesEnabled&&n.isIpadIOS())b=a.ios;return b}return a[t.icon]},ba=function(a){a.find('[class*\x3d"ssf-multi-"]').length||a.find(".ssf-share-trigger").addClass("ssf-multi-"+Math.random().toString(36).slice(2));D=a.find('[class*\x3d"ssf-multi-"]')},H=void 0,U=void 0,M=void 0,N=void 0,O=void 0,Q=void 0,I=void 0;u.when("a-sheet").execute(function(a){return H=a});u.when("a-popover").execute(function(a){return U=
a});u.when("a-modal").execute(function(a){return M=a});u.when("SocialShareWidgetTiny").execute(function(a){return I=a});var F=function(a,b){var c=2<arguments.length&&arguments[2]!==k?arguments[2]:"ssf-share-bottom-sheet",g=m.displayCustomShareSheet||m.customize||m.caf;if(!N||g)N=H.create({name:c,inlineContent:a,closeType:"icon",height:b});H.showSheet(N)},R=function(a){var b=a.type===l.WIDGET_TYPE.POPOVER&&U,c=a.type===l.WIDGET_TYPE.MODAL&&M;a=C.build(a);H?F(a.getBottom()):b?(b=a.getPopover(),D.hasClass("a-declarative")||
(O=U.create(D,{name:"ssf-share-popover",position:m.popoverPosition,inlineContent:b,activate:"onclick",closeButton:!0,width:160,padding:"none",popoverLabel:"Share Popup",closeButtonLabel:"Close Share Popup"}).show())):c&&(b=a.getModal(),D.hasClass("a-declarative")||(Q=M.create(D,{name:"ssf-share-modal",inlineContent:b,width:600,popoverLabel:"Share Modal"}).show()))},fa=function(a){if(a.displayCustomShareSheet||a.customize||a.caf)c.logCounter("webview.sharesheet.caf.background"),c.logCounterRefactor("webview.sharesheet.caf.background",
a.shareDataAttributes.ingress),u.when("mash").execute(function(a){a.addEventListener("appPause",K)})},S=function(a){u.when("SocialShareWidgetCustomize").execute(function(b){C.build(a).getCustomize(function(c){F(c,650,"ssf-customize-bottom-sheet");b.init(a,R,K);fa(a)})})},K=function X(){u.when("mash").execute(function(a){a.removeEventListener("appPause",X)});O&&U.get(D).hide();N&&H.hideSheet(N);Q&&M.get(D).hide()},Z=function(){var a=m.shareDataAttributes.asin,b=h.DetailPage;if(!b)return!1;b=b.StateController&&
b.StateController.getState().current_asin;m.shareDataAttributes.asin="string"==typeof b?b:a;return a!==b},P=function(a){a.addClass("ssf-noclick");a.find(".a-spinner").removeClass(B);a.find("i").hide()},V=function(a){a.removeClass("ssf-noclick");a.find(".a-spinner").addClass(B);a.find("i").show()},Y=function(a,b,g){var e=a.shareDataAttributes,p=a.t;c.logCSAEvent(w.CSA_HIT_TYPE.SHARE,b);c.logCounter("DPX.Desktop.CopySuccess");c.logCounter("Share.CopySuccess");c.logCounter(d,"CopySuccess");c.logCounterRefactor("CopySuccess",
e.ingress);n.isDesktop()?function(){var a=g.find(".copy-label");a.text(p.taf_copy_url_changeover);f.delay(function(){K();a.text(p.taf_copy_name)},1E3)}():(q(".ssf-feedback").show(),K())},G=function(a){c.logCSAEvent(w.CSA_HIT_TYPE.CLICK_ERROR,a);c.logCounter("DPX.Desktop.CopyFailure");c.logCounter("Share.CopyFailure");c.logCounter(d,"CopyFailure")},aa=function(a){var b=a.shareData,g=a.channelRef,d=b.shareUrl;a=b.socialLinks;var f=a===k?{}:a;a=b.isOGTEnabled;a=a===k?!1:a;var p=b.dealsPreviewEnabled;
p=p===k?!1:p;var w=b.eventPreviewTreatment;w=w===k?"C":w;d.refMarker.isBestFormatEnabled=b.isBestFormatEnabled;g=g?d.getReturnForChannel(g):d.return;d=f.shareframework||b.url;f=b.aapiBaseUrl;f=f===k?"":f;var x=b.shareAapiCsrfToken;x=x===k?"":x;var m=b.tinyUrlEnabled;m=m===k?!1:m;var n=b.deeplinkInfo;n=n===k?{}:n;var v=b.storeId;v=v===k?"":v;var A=b.shareDataAttributes,z=A.marketplaceId;z=z===k?"":z;A=A.ingress;A=A===k?"":A;b.isUnrecognizedUsersRichPreviewEnabled&&(g=new URL(g),g.searchParams.append("starsLeft",
1),g=g.toString());"c"!==w.toLowerCase()&&(g=new URL(g),b=w.match(/^T(\d+)$/),g.searchParams.append("peakEvent",b[1]),g.searchParams.append("dealEvent",p?"1":"0"),g=g.toString(),c.logCounterRefactor("EventPreview"+w,A));return{tinyUrlEnabled:m,aapiBaseUrl:f,shareAapiCsrfToken:x,marketplaceId:z,url:g,isOGTEnabled:a,originalUrl:d||g,refMarkerId:e++,deeplinkInfo:n,storeId:v}};q(document).delegate(".ssf-channel:not(.copy,.embed)","click",function(a){a.preventDefault();a.stopPropagation();c.logCounter("DPX.Desktop.ChannelClick");
c.logCounter("ShareClick");c.logCounter(d,"ChannelClick");c.logCounterRefactor("ChannelClick",m.shareDataAttributes.ingress);var b=q(this),g=b.data("key"),e=m;a=e.refererURL;var p=e.shareDataAttributes,x=e.treatment;x=x===k?"":x;var A=e.weblab;A=A===k?"":A;var v=e.builtChannels[g],z=v.ref;g=e.shareUrl.refMarker.getClickForChannel(z);e=v.name;var l=v.getSharingUrl();c.logCSAEvent(w.CSA_HIT_TYPE.SHARE,{channel:e,refMarker:g,refererURL:a,shareDataAttributes:p,treatment:x,weblab:A});a=aa({shareData:m,
channelRef:z});P(b);I.fetch({data:a,callback:function(a){V(b);a&&(l=v.getSharingUrl(a),c.logCounter("Desktop.Tiny.Success"),c.logCounterRefactor("Tiny.Success",p.ingress));if("em"===z)h.open(l,"_self");else if(n.isDesktop()){a=screen.width;var g=screen.height,d="pi"===z?900:600,e=Math.min(d,.7*a);d=Math.min(d,.7*g);h.open(l,"_blank","toolbar\x3d0,status\x3d0,width\x3d"+e+",height\x3d"+d+",top\x3d"+(g/2-d/2)+",left\x3d"+(a/2-e/2))}else h.open(l,"_blank");K();f.trigger("ssf:event:share",m)}})});f.declarative("ssf-share-icon",
"click",function(b){c.logCounter("DPX.Desktop.SheetClick");c.logCounter("SheetClick");c.logCounter(d,"SheetClick");if(y)return K();ba(b.$currentTarget);m=f.extend(m,b.data);m.shareDataAttributes=f.extend(l.shareDataAttributes,b.data.shareDataAttributes);var e=m.shareDataAttributes.ingress;c.logCounterRefactor("SheetClick",e);if(!f.objectIsEmpty(b.data.associateLink)&&L.length)c.logCounter("SheetClick.Associate"),f.trigger("ac-getlink-bottomsheet-event",m);else{f.extend(v[m.lang],m.t);var x=g(m,m.channels);
m.builtChannels=x;m.url=m.url.startsWith("/")?""+h.location.origin+m.url:m.url;m.shareUrl=new A(m.url,m.refId);Z()&&(m.shareUrl=new A(m.url,m.refId),m.shareUrl.url.searchParams.set("psc",1));a.set("shareData",m);!n.isDesktop()||m.isIpadFixesEnabled&&n.isIpadIOS()&&n.isNativeWebShareAvailable()?m.displayCustomShareSheet||m.customize||m.caf?S(m):(P(b.$currentTarget),x=aa({shareData:m}),m=f.extend(m,{sheetShownCallback:function(){V(b.$currentTarget)}}),I.fetch({data:x,callback:function(a){m.tinyUrl=
a;(new p(m)).launch(function(){R(m);c.logCounter("DPX.Desktop.SheetOpen");c.logCounter("SheetOpen");c.logCounter(d,"SheetOpen");c.logCounterRefactor("SheetOpen",e);V(b.$currentTarget)})}})):(m.isUnrecognizedUsersRichPreviewEnabled&&m.shareUrl.url.searchParams.set("starsLeft",1),m.image=m.image||q("#imgTagWrapperId img").attr("src"),R(m),c.logCounter("DPX.Desktop.SheetOpen"),c.logCounter("SheetOpen"),c.logCounter(d,"SheetOpen"),c.logCounterRefactor("SheetOpen",e),c.logCSAEvent(w.CSA_HIT_TYPE.CLICK_SUCCESS,
{channel:w.EMPTY_STRING,refMarker:m.shareUrl.refMarker.click,refererURL:m.refererURL,shareDataAttributes:m.shareDataAttributes,treatment:m.treatment||"",weblab:m.weblab||""}));n.isSafari()&&n.isDesktop()&&(x=aa({shareData:m,channelRef:w.CP_CHANNEL_REF}),I.fetch({data:x,callback:function(a){c.logCounter("TinyUrlOnSheetOpen");T=a}}));f.trigger("ssf:event:sheetOpen",m)}});q(document).delegate(".ssf-copy,.ssf-channel.copy","click",function(a){c.logCounter("ShareClick");c.logCounter("DPX.Desktop.ChannelClick");
c.logCounter(d,"ChannelClick");c.logCounterRefactor("ChannelClick",m.shareDataAttributes.ingress);a.preventDefault();var b=m;a=b.shareUrl;var g=b.shareDataAttributes,e=b.treatment;e=e===k?"":e;var p=b.weblab;p=p===k?"":p;b=b.isBestFormatEnabled;var x=w.CP_CHANNEL_REF,A=a.refMarker.getClickForChannel(x),v={channel:w.CP_CHANNEL_REF,refMarker:A,shareDataAttributes:g,treatment:e,weblab:p},z=q(this);a.refMarker.isBestFormatEnabled=b;var l=a.getReturnForChannel(x);n.isSafari()&&n.isDesktop()?navigator.clipboard.writeText(T||
l).then(function(){Y(m,v,z)},function(){G(v)}):(a=aa({shareData:m,channelRef:x}),P(z),I.fetch({data:a,callback:function(a){V(z);navigator.clipboard.writeText(a||l).then(function(){Y(m,v,z)},function(){G(v)})}}));f.trigger("ssf:event:share",m)});q(document).delegate(".ssf-embed,.ssf-channel.embed","click",function(a){a.preventDefault();var b=m;a=b.shareDataAttributes;var g=b.treatment;g=g===k?"":g;var e=b.weblab;e=e===k?"":e;b={channel:"embed",refMarker:b.shareUrl.refMarker.getClickForChannel(w.EMBED_CHANNEL_REF),
shareDataAttributes:a,treatment:g,weblab:e};c.logCSAEvent(w.CSA_HIT_TYPE.SHARE,b);c.logCounter("DPX.Desktop.ChannelClick");c.logCounter(d,"ChannelClick");c.logCounter("ChannelClick.Embed");c.logCounter("ShareClick");c.logCounterRefactor("ChannelClick",a.ingress);M.create(q(".ssf-channel.embed"),m.kpModalParams).show()});b=function(){D=q(".ssf-share-trigger");t=J(D);var a=t.width;if(!q(".ssf-background").length&&t.background){var b=1.4*a;b=q('\x3cdiv class\x3d"ssf-background'+(t.floatedIcon?"-float":
"")+'"\x3e\x3c/div\x3e').css({width:b,height:b});D.wrap(b)}t.icon&&D.css({height:a,width:a,backgroundImage:"url("+z()+")"})};n.isIE()&&q(".ssf-share-trigger,.ssf-background").remove();f.on("a:popover:afterUpdatePosition:ssf-share-popover",function(a){a=a.popover.$popover;var b=a.position().left-m.popoverDistance;a.find(".a-arrow-border").css({right:24,left:""});a.css({left:b})});f.on("ssf:event:trigger-share-widget",function(a){f.trigger("a:declarative:ssf-share-icon:click",{data:a,$currentTarget:(1<
arguments.length&&arguments[1]!==k?arguments[1]:k)||x})});f.on("a:popover:show:ssf-share-popover",function(){y=!0;document.getElementsByClassName("ssf-share-trigger")[0].setAttribute("aria-expanded","true")});f.on("a:popover:hide:ssf-share-popover",function(){y=!1;document.getElementsByClassName("ssf-share-trigger")[0].setAttribute("aria-expanded","false")});f.on("a:popover:show:ssf-share-modal",function(){y=!0;document.getElementsByClassName("ssf-share-trigger")[0].setAttribute("aria-expanded","true")});
f.on("a:popover:hide:ssf-share-modal",function(){y=!1;document.getElementsByClassName("ssf-share-trigger")[0].setAttribute("aria-expanded","false")});f.on("a:sheet:beforeShow:ssf-customize-bottom-sheet",function(a){a.sheet.$container.css("height","")});b()})()}catch(q){c.logCounter("DPX.Desktop.Error"),c.logCounter(d,"Error"),c.logLoad("Error"),c.logFatal("Error loading Share Framework AUI: "+q.toString())}finally{c.logCounter("DPX.Desktop.Render"),c.logCounter(d,"Render"),c.logLoad("Render"),f.trigger("ssf:event:load"),
c.stopTimer(d)}return{init:b}});"use strict";var W=function(){return function(f,h){if(Array.isArray(f))return f;if(Symbol.iterator in Object(f)){var t=[],l=!0,a=!1,r=k;try{for(var c=f[Symbol.iterator](),e;!(l=(e=c.next()).done)&&(t.push(e.value),!h||t.length!==h);l=!0);}catch(b){a=!0,r=b}finally{try{if(!l&&c["return"])c["return"]()}finally{if(a)throw r;}}return t}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}();u.when("A","SocialShareWidgetConfig","SocialShareWidget").register("SocialShareWidgetTemplating",
function(f,h,C){C=C.SocialShareCore;var l=f.$,a=C.Detection.isClipboardAvailable,r=C.Detection.isDesktop,c=h.excludedChannels;a()||c.push("copy");var e=function(a){return'\x3cspan class\x3d"a-spinner a-spinner-'+a+' a-align-center aok-hidden"\x3e\x3c/span\x3e'};return{build:function(b){var f=b.shareUrl,d=b.socialLinks,t=d===k?{}:d;d=b.shareDataAttributes;var q=b.builtChannels,n=b.kpModalParams,v=b.t;t.email=b.mailToUri;var g='\x3cspan class\x3d"a-button ssf-copy"\x3e\n        \x3cspan class\x3d"a-button-inner"\x3e\n          \x3cinput class\x3d"a-button-input" type\x3d"button" aria-label\x3d"'+
v.taf_copy_tooltip+'"\x3e\n          \x3cspan class\x3d"a-button-text" aria-hidden\x3d"true"\x3e\n            \x3cbutton class\x3d"a-button-text"\x3e\n              \x3cdiv class\x3d"copy-label"\x3e\n                '+v.taf_copy_tooltip+"\n              \x3c/div\x3e\n            \x3c/button\x3e\n          \x3c/span\x3e\n        \x3c/span\x3e\n      \x3c/span\x3e";!r()&&a()&&1>l(".ssf-feedback").length&&l(document.body).append('\x3cdiv class\x3d"a-changeover ssf-feedback" style\x3d"display:none"\x3e\n          \x3cdiv class\x3d"a-changeover-inner"\x3e\n            \x3ci class\x3d"a-icon a-icon-checkmark-inverse"\x3e\x3c/i\x3e\n            \x3cstrong class\x3d"a-size-medium"\x3e'+
v.taf_copy_url_changeover+"\x3c/strong\x3e\n          \x3c/div\x3e\n        \x3c/div\x3e");var p=function(a){return{title:v["taf_"+a.name+"_tooltip"]||a.label,label:v["taf_"+a.name+"_name"]||a.label}};h.lineMarketplaces.includes(d.marketplaceId)||t.li?c.push("pi"):c.push("li");n||c.push("embed");h.cnMarketplace.includes(d.marketplaceId)&&c.push.apply(c,G(h.nonCNChannels));return{getModal:function(){var b="",d=!0,n=!1,l=k;try{for(var m=Object.entries(q)[Symbol.iterator](),h;!(d=(h=m.next()).done);d=
!0){var r=W(h.value,2),C=r[0],x=r[1];if(!c.includes(C)&&"copy"!==C){var z=p(x),y=t[x.name]||x.getSharingUrl();b+='\x3cli class\x3d"ssf-channel-h"\x3e\n              \x3ca class\x3d"ssf-channel a-color-base" aria-label\x3d"'+z.label+'" href\x3d"'+y+'" title\x3d"'+z.title+'" data-key\x3d"'+C+'"\x3e\n                '+e("medium")+'\n                \x3ci aria-hidden\x3d"true" style\x3d"background-image: url('+x.image+')"\x3e\x3c/i\x3e\n              \x3c/a\x3e\n              \x3cspan\x3e'+z.label+"\x3c/span\x3e\n            \x3c/li\x3e"}}}catch(H){n=
!0,l=H}finally{try{!d&&m.return&&m.return()}finally{if(n)throw l;}}d=a()?'\x3cdiv class\x3d"ssf-copy-section a-box a-padding-base a-spacing-top-large"\x3e\n              \x3cdiv class\x3d"link-section"\x3e'+f.return+'\x3c/div\x3e\n              \x3cdiv class\x3d"copy-button"\x3e'+g+"\x3c/div\x3e\n          \x3c/div\x3e":"";return'\x3ch3 class\x3d"a-spacing-large"\x3e'+v.taf_share_bottom_sheet_title+"\x3c/h3\x3e"+('\x3cdiv class\x3d"ssf-h-icons"\x3e\x3cul class\x3d"ssf-h-icons a-nostyle"\x3e'+b+"\x3c/ul\x3e\x3c/div\x3e")+
d},getPopover:function(){var a="",b=!0,g=!1,d=k;try{for(var f=Object.entries(q)[Symbol.iterator](),v;!(b=(v=f.next()).done);b=!0){var n=W(v.value,2),l=n[0],x=n[1];if(!c.includes(l)){var z=p(x),h=t[x.name]||x.getSharingUrl();a+='\x3cli class\x3d"ssf-channel-v"\x3e\n              \x3ca class\x3d"ssf-channel '+l+' a-color-base" aria-label\x3d"'+z.label+'" href\x3d"'+h+'" title\x3d"'+z.title+'" data-key\x3d"'+l+'"\x3e\n                '+e("small")+'\n                \x3ci aria-hidden\x3d"true" style\x3d"background-image: url('+
x.image+')"\x3e\x3c/i\x3e\n                \x3cspan class\x3d"'+l+'-label"\x3e'+z.label+"\x3c/span\x3e\n              \x3c/a\x3e\n            \x3c/li\x3e"}}}catch(H){g=!0,d=H}finally{try{!b&&f.return&&f.return()}finally{if(g)throw d;}}return'\x3cul class\x3d"a-nostyle"\x3e'+a+"\x3c/ul\x3e"},getBottom:function(){var a="",b=!0,g=!1,d=k;try{for(var f=Object.entries(q)[Symbol.iterator](),n;!(b=(n=f.next()).done);b=!0){var l=W(n.value,2),h=l[0],x=l[1];if(!c.includes(h)){var z=p(x),r=t[x.name]||x.getSharingUrl();
a+='\x3cli class\x3d"ssf-channel-b a-padding-base"\x3e\n              \x3ca class\x3d"ssf-channel '+h+' a-color-base" aria-label\x3d"'+z.label+'" href\x3d"'+r+'" title\x3d"'+z.title+'" data-key\x3d"'+h+'"\x3e\n                '+e("medium")+'\n                \x3ci aria-hidden\x3d"true" style\x3d"background-image: url('+x.image+')"\x3e\x3c/i\x3e\n                \x3cspan class\x3d"a-size-base-plus"\x3e'+z.label+"\x3c/span\x3e\n              \x3c/a\x3e\n              \x3c/li\x3e"}}}catch(H){g=!0,d=
H}finally{try{!b&&f.return&&f.return()}finally{if(g)throw d;}}return'\x3cdiv class\x3d"a-padding-base ssf-header"\x3e\n          \x3ch4\x3e'+v.taf_share_bottom_sheet_title+'\x3c/h4\x3e\n        \x3c/div\x3e\x3cdiv class\x3d"ssf-scroll"\x3e\x3cul class\x3d"a-nostyle"\x3e'+(a+"\x3c/ul\x3e")+"\x3c/ul\x3e\x3c/div\x3e"},getCustomize:function(){var a=void 0;u.now("SocialShareWidgetCustomizeTemplate").execute(function(g){a=b.customize?g.getCustomizeBox(v):""});var g='\x3ch3 class\x3d"a-spacing-base a-spacing-top-base"\x3e'+
v.taf_share_bottom_sheet_title+"\x3c/h3\x3e",c='\x3cdiv class\x3d"ssf-heading-container"\x3e\x3cimg class\x3d"ssf-back-btn" src\x3d"https://m.media-amazon.com/images/G/01/share-icons/arrow-left.svg"\x3e'+g+"\x3c/div\x3e",d='\x3cdiv class\x3d"a-padding-base a-box ssf-preview-container ssf-no-border" style\x3d"background-image: url('+b.image+')"\x3e'+e("medium")+"\x3c/div\x3e",f=b.caf?'\x3cdiv class\x3d"a-row a-spacing-top-large'+(b.customize?"":" a-spacing-large")+'"\x3e\n          \x3cdiv class\x3d"a-column a-span9"\x3e\n            \x3cstrong class\x3d"ssf-caf-toggle-label"\x3e'+
v.taf_custshare_caf_ingress+'\x3c/strong\x3e\n          \x3c/div\x3e\n          \x3cdiv class\x3d"a-column a-span3 a-text-right a-span-last"\x3e\n            \x3cdiv class\x3d"a-switch-row ssf-caf-toggle"\x3e\n          \x3cinput class\x3d"a-declarative a-switch-input" data-action\x3d"a-switch-input" name\x3d"caf" type\x3d"checkbox"\x3e\n          \x3clabel class\x3d"a-switch-label a-declarative" data-action\x3d"a-switch-label"\x3e\n            \x3cdiv class\x3d"a-switch a-declarative" data-action\x3d"a-switch"\x3e\n              \x3ca class\x3d"a-switch-control" aria-label\x3d"caf" style\x3d"transform: translateX(-1px) translateZ(0px);"\x3e\x3c/a\x3e\n            \x3c/div\x3e\n          \x3c/label\x3e\n        \x3c/div\x3e\n          \x3c/div\x3e\n        \x3c/div\x3e':
"",p='\x3cspan class\x3d"a-button a-button-primary a-spacing-top-small ssf-customize-share-btn"\x3e\n          \x3cspan class\x3d"a-button-inner"\x3e\n            \x3cinput class\x3d"a-button-input" type\x3d"button" aria-labelledby\x3d"ssf-customize-share-btn"\x3e\n            \x3cspan class\x3d"a-button-text" aria-hidden\x3d"true" id\x3d"ssf-customize-share-btn"\x3e\n              '+b.shareLabel+"\n              "+e("small")+"\n            \x3c/span\x3e\n          \x3c/span\x3e\n        \x3c/span\x3e";
return'\x3cdiv class\x3d"a-padding-base ssf-customize-container-one"\x3e'+g+d+f+a+p+"\x3c/div\x3e"+(b.customize?'\x3cdiv class\x3d"a-padding-base ssf-customize-container-two aok-hidden"\x3e'+c+d+f+'\x3cdiv class\x3d"a-row a-spacing-top-base a-padding-base ssf-tabs"\x3e\x3c/div\x3e'+p+"\x3c/div\x3e":"")}}}}});"use strict";u.when("jQuery","SocialShareWidget","SocialShareWidgetState","SocialShareWidgetLinkUtil","SocialShareWidgetAPI").register("SocialShareWidgetTiny",function(f,t,C,l,a){t=t.SocialShareCore;
var r=t.Metrics,c=t.Constants;return{fetch:function(e){var b=e.data,t=e.isAsync,d=t===k?!0:t,B=e.callback;try{if(0<b.refMarkerId){var q=new URL(b.url),n=q.searchParams.get("ref_");n&&(n=n+"_"+b.refMarkerId,q.searchParams.set("ref_",n),b.url=q.toString())}var v=C.get("shareData");if(C.get("dpx")){var g=C.get("shareAapiCsrfToken"),p=C.get("aapiBaseUrl");if("C"!==v.skipTwisterAPI){var A=new URL(b.url);A.searchParams.append("skipTwisterOG","T2"===v.skipTwisterAPI?2:1);b.url=A.toString()}if(v.isBestFormatEnabled){var w=
new URL(b.url);w.searchParams.append("bestFormat","true");b.url=w.toString()}b.url=l.getLinkWithFlippedStarsLeft(b.url);"dprv"===v.refId&&(b.shareAapiCsrfToken=g,b.aapiBaseUrl=p,b.tinyUrlEnabled=!0,r.logCounter("reviews.tiny"))}var J=h.location.protocol+"//";if(b.isOGTEnabled){var D=new URL(b.url);D.searchParams.append("newOGT","1");b.url=D.toString()}var m=b.deeplinkInfo;if(m&&m.isDisabled&&m.flag!=k){var E=new URL(b.url);E.searchParams.append("nodl",m.flag);b.url=E.toString()}if(b.isOnShareGatingEnabled)a.build(v).onShare(d,
b.url,b.extractedRef,b.osType,B);else if(b.tinyUrlEnabled)if(b.aapiBaseUrl&&b.shareAapiCsrfToken&&b.marketplaceId)(function(){var a=""+J+b.aapiBaseUrl+"/api/marketplaces/"+b.marketplaceId+"/social-share/tinyurl",g={longUrl:b.url},e={"Accept-Language":"en-US",Accept:'application/vnd.com.amazon.api+json; type\x3d"social-share.tinyurl/v1"',"x-api-csrf-token":b.shareAapiCsrfToken,"Content-Type":"application/x-www-form-urlencoded","x-amzn-encrypted-slate-token":C.get("slateToken")};r.startTimer("Tiny");
f.ajax(a,{type:"POST",headers:e,xhrFields:{withCredentials:!0},contentType:"application/x-www-form-urlencoded",async:d,data:g,success:function(a){r.logCounter("Tiny.Response");r.logCounter("Desktop.Tiny.Response");r.logCounterRefactor("Tiny.Response");a.entity&&a.entity.shortUrl?(B(a.entity.shortUrl.url),r.logCounter("Tiny.Success")):(u.log("Error Generating TinyURL. with share url "+b.url,"ERROR",c.SSF_AUI_PACKAGE_ATTRIBUTION),r.logCounter("Tiny.Error"),B(b.url))},error:function(g){u.log("Error Generating TinyURL. with share url "+
b.url+", Error Code: "+g.status+", Error Response: "+g.responseText+", Endpoint: "+a,"ERROR",c.SSF_AUI_PACKAGE_ATTRIBUTION);r.logCounter("Tiny.Error");r.logCounter("Desktop.Tiny.Error");r.logCounterRefactor("Tiny.Error");B(b.url)},complete:function(){r.stopTimer("Tiny")}})})();else return r.logCounter("Tiny.Unavailable"),B(b.url);else return B(b.url)}catch(T){return u.log("Error generating tinyURL: "+T.toString(),"ERROR",c.SSF_AUI_PACKAGE_ATTRIBUTION),b.url}}}});"use strict";u.when("A").register("SocialShareWidgetState",
function(f){var k="social-"+h.ue_id+"-share",C={slateToken:f.$('meta[name\x3d"encrypted-slate-token"]').attr("content")||"",dpx:!1};f.state(k,C);return{getCurrent:function(){return f.state(k)},get:function(f){return this.getCurrent()[f]},getAndReset:function(f){var a=this.get(f);a&&this.set(f,null);return a},set:function(l,a){var h=this.getCurrent();f.trigger("ssf:event:state:set",h);if(!l)return h;h[l]=a;h=f.state(k,h);f.trigger("ssf:event:state:changed",h);return h}}});"use strict";u.when("jQuery",
"SocialShareWidget","SocialShareWidgetState").register("SocialShareWidgetAPI",function(f,t,C){t=t.SocialShareCore;var l=t.Constants,a=t.Metrics,r=h.location.protocol+"//",c=a.getMetricName(f,l.customize),e=Object.freeze({GET:"GET",POST:"POST",PUT:"PUT"}),b=Object.freeze({generateImage:'application/vnd.com.amazon.api+json; type\x3d"aapi.socialshareapicontracts.custom.ssapis.product.generate.customized.image.response/v1"',externalizeImage:'application/vnd.com.amazon.api+json; type\x3d"aapi.socialshareapicontracts.custom.ssapis.product.externalize.customized.image.response/v1"',
fetchTabs:'application/vnd.com.amazon.api+json; type\x3d"aapi.socialshareapicontracts.custom.ssapis.product.shareable.attributes.response/v1"',getWeblabTreatmentAndTrigger:'application/vnd.com.amazon.api+json; type\x3d"aapi.socialshareapicontracts.weblab.treatment-and-trigger.response/v1"',onShare:'application/vnd.com.amazon.api+json; type\x3d"aapi.socialshareapicontracts.social-share.on-share.response/v1"',fetchCAFID:'application/vnd.com.amazon.api+json; type\x3d"aapi.consultafriendcontracts.custom.consult-a-friend.feedback-request.response/v1"',
fetchHmpPollId:'application/vnd.com.amazon.api+json; type\x3d"aapi.consultafriendcontracts.custom.helpmepick.create-poll.response/v1"'}),y=function(a){return(a=a.entity)&&"SUCCEEDED"===a.status?a.tabs.map(function(a){var b={id:a.id,heading:a.shortDisplayName,text:a.longDisplayName,isQuote:!0};a.params&&(b.values=Object.values(a.params)[0],b.isQuote=!1);return b}):[]};return{build:function(d){var h=d.shareAapiCsrfToken,q=d.locale,n=d.cafAapiCsrfToken,v=d.productType,g=d.shareDataAttributes,p=g.marketplaceId,
A=g.asin,w=g.ingress,t=r+d.aapiBaseUrl,D=C.get("slateToken");D||a.logCounter("slate.missing");var m=function(a){return t+"/custom/socialshareapicontracts/marketplaces/"+p+"/products/"+A+"/shareframework/"+a},E=function(a){var b=a.async;f.ajax({url:a.url,type:a.type,async:b===k?!0:b,data:a.data,headers:{"Accept-Language":q,Accept:a.accept,"x-api-csrf-token":a.cafToken||h,"Content-Type":"application/x-www-form-urlencoded","x-amzn-encrypted-slate-token":D},xhrFields:{withCredentials:!0},success:a.success,
error:a.error,complete:a.complete})};return{generateImage:function(g,d){var f=m("generatecustomizedimage");a.startTimer("GenerateCustomizeImage");E({url:f,type:e.POST,data:g,accept:b.generateImage,success:function(b){"SUCCEEDED"===b.entity.status?(a.logCounter("GenerateCustomizeImage.Success"),a.logCounter(c,"generateCustomizeImageSuccess"),a.logCounterRefactor("generateCustomizeImageSuccess",w)):(a.logCounter("GenerateCustomizeImage.Fail"),a.logCounter(c,"generateCustomizeImageFail"),a.logCounterRefactor("generateCustomizeImageFail",
w));d(b)},error:function(b){a.logCounter("GenerateCustomizeImage.Error");a.logCounter(c,"generateCustomizeImageError");a.logCounterRefactor("generateCustomizeImageError",w);a.logCounter("generateCustomizeImageError");u.log("Error generating customize image. with request URL "+f+", Error Code: "+b.status+". Error Response: "+b.responseText,"ERROR",l.SSF_AUI_PACKAGE_ATTRIBUTION);d(b)},complete:function(){a.stopTimer("GenerateCustomizeImage")}})},externalizeImage:function(g,d,f){var p=m("externalizecustomizedimage?customizedImageUrl\x3d"+
g);a.startTimer("ExternalizeImage");E({url:p,type:e.PUT,accept:b.externalizeImage,async:f,success:function(a){d(a)},error:function(b){a.logCounter(c,"externalizeImageFail");a.logCounterRefactor("externalizeImageFail",w);a.logCounter("externalizeImageFail");u.log("Error externalizing image. with request URL "+p+", Error Code: "+b.status+". Error Response: "+b.responseText,"ERROR",l.SSF_AUI_PACKAGE_ATTRIBUTION);d({})},complete:function(){a.stopTimer("ExternalizeImage")}})},fetchTabs:function(g){var d=
m("productshareableattributes?locale\x3d"+q+"\x26type\x3d"+v);a.startTimer("FetchTabs");E({url:d,type:e.GET,accept:b.fetchTabs,success:function(b){a.logCounter(c,"FetchTabsSuccess");a.logCounterRefactor("FetchTabsSuccess",w);g(y(b))},error:function(b){a.logCounter(c,"FetchTabsFail");a.logCounterRefactor("FetchTabsFail",w);a.logCounter("FetchTabsFail");u.log("Error Fetching customize share tabs. with request URL "+d+", Error Code: "+b.status+". Error Response: "+b.responseText,"ERROR",l.SSF_AUI_PACKAGE_ATTRIBUTION);
g([])},complete:function(){a.stopTimer("FetchTabs")}})},fetchCAFID:function(g){var f=1<arguments.length&&arguments[1]!==k?arguments[1]:!0,v=t+"/custom/consultafriendcontracts/marketplaces/"+p+"/consultafriend/feedback-request/"+A;a.logCounter(c,"CAF.createCAFID.called");a.logCounterRefactor("CAF.createCAFID.called",w);a.startTimer("CafIdGeneration");E({url:v,type:e.POST,accept:b.fetchCAFID,async:f,cafToken:n,success:function(a){g(a.entity&&a.entity.cafId,A,d.url)},error:function(b){a.logCounter(c,
"CAF.createCAFID.failed");a.logCounterRefactor("CAF.createCAFID.failed",w);u.log("Error Creating CAF Id. with request URL "+v+", Error Code: "+b.status+". Error Response: "+b.responseText,"ERROR",l.SSF_AUI_PACKAGE_ATTRIBUTION);g()},complete:function(){a.stopTimer("CafIdGeneration")}})},fetchHmpPollId:function(g){var c=1<arguments.length&&arguments[1]!==k?arguments[1]:!0,v=d.hmpAapiCsrfToken,n=f.param(d.hmpState,!0),A=t+"/custom/consultafriendcontracts/marketplaces/"+p+"/helpmepick/poll?"+n;a.logCounter("HMP.fetchHmpPollId.called."+
w);a.startTimer("HmpIdGeneration");E({url:A,type:e.POST,accept:b.fetchHmpPollId,async:c,cafToken:v,success:function(a){g(a.entity&&a.entity.cafId)},error:function(b){a.logCounter("HMP.fetchHmpPollId.failed."+w);u.log("Error Fetching Poll Id. with request URL "+A+", Error Code: "+b.status+". Error Response: "+b.responseText,"ERROR",l.SSF_AUI_PACKAGE_ATTRIBUTION);g()},complete:function(){a.stopTimer("HmpIdGeneration")}})},getWeblabTreatmentAndTrigger:function(g,c,d){var f=t+"/custom/socialshareapicontracts/marketplaces/"+
p+"/weblab/get-weblab-treatment-and-record?name\x3d"+c;a.startTimer("GetWeblabTreatmentAndTriggerMetric");E({url:f,type:e.GET,accept:b.getWeblabTreatmentAndTrigger,async:g,success:function(b){a.logCounter("GetWeblabTreatmentAndRecordSuccess");d(b)},error:function(b){a.logCounter("GetWeblabTreatmentAndRecordFail");u.log("Error calling weblab treatment and trigger. with request URL "+f+", Error Code: "+b.status+". Error Response: "+b.responseText,"ERROR",l.SSF_AUI_PACKAGE_ATTRIBUTION);d([])},complete:function(){a.stopTimer("GetWeblabTreatmentAndTriggerMetric")}})},
onShare:function(g,c,d,f,v){var n=t+"/custom/socialshareapicontracts/marketplaces/"+p+"/products/"+A+"/shareframework/onshare";a.startTimer("onShare");E({url:n,type:e.POST,accept:b.onShare,async:g,data:{longUrl:c,channel:d,osType:f},success:function(b){"SUCCEEDED"===b.entity.status?(v(b.entity.shortUrl.url),a.logCounter("OnShare.Success")):(u.log("The request was sent successfully, but the response status indicates a failure with request URL "+c,"ERROR",l.SSF_AUI_PACKAGE_ATTRIBUTION),a.logCounter("OnShare.Failure"),
v(c))},error:function(b){a.logCounter("OnShare.Error");u.log("Error calling on share. with request URL "+c,"ERROR",l.SSF_AUI_PACKAGE_ATTRIBUTION);v([])},complete:function(){a.stopTimer("onShare")}})}}}}});"use strict";u.when("A","SocialShareWidget","SocialShareWidgetAPI").register("SocialShareWidgetCustomShareOptionsTemplate",function(f,h,C){function l(a,b,c,d){C.build(a).getWeblabTreatmentAndTrigger(b,c,function(a){d(a.entity)})}function a(a){return new Promise(function(b){l(a,!1,"TMT_SOCIAL_SHARE_ANDROID_COPY_LINK_1061126",
function(a){b(a&&"SUCCEEDED"===a.status&&"T1"===a.treatment)})})}var r=f.capabilities.rtl,c=h.SocialShareCore.Detection.isAndroid(),e=void 0,b=f.constants.HIDE_CLASS;u.when("mash").execute(function(a){return e=a});var t=function(a,b){if(!e||0===a.length)return b([]);var g=a.length,c=[];a.forEach(function(a){d(a,function(a,d){g--;d&&(c[a.label.toLowerCase()]=a);(3<=c.length||0>=g)&&b(c)})})},d=function(a,b){var g="whatsapp"===a.label.toLowerCase()&&c;e.canLaunchIntentURL({url:a.schemeURI,successCallback:function(c){if(g)return b(a,
!0);b(a,c)},failCallback:function(){if(g)return b(a,!0);b(a,!1)}})},B=function(a,g){var c=g.stringId,d=g.className,e=g.label;g="https://m.media-amazon.com/images/G/01/share-icons/"+g.image;return'\x3cli class\x3d"ssf-custom-share-option '+(d===k?"":d)+'"  data-name\x3d"'+e.toLowerCase()+'"\x3e\n                    \x3cdiv class\x3d"ssf-custom-share-spinner" role\x3d"button"\x3e\n                        '+('\x3cspan class\x3d"a-spinner a-spinner-medium a-align-center '+b+'"\x3e\x3c/span\x3e')+'\n                        \x3cimg src\x3d"'+
g+'" title\x3d"'+e+'" aria-label\x3d"'+e+'"/\x3e\n                    \x3c/div\x3e\n                    \x3cspan class\x3d"label a-size-small"\x3e'+(a.t[c]||e)+"\x3c/span\x3e\n                 \x3c/li\x3e"},q=function(a){var b=1<arguments.length&&arguments[1]!==k?arguments[1]:"";a=a.startsWith("http")?a:"https://m.media-amazon.com/images/G/01/share-icons/"+a;return'\x3cimg class\x3d"'+b+'" src\x3d"'+a+'" /\x3e'},n=function(){return'\x3cspan class\x3d"a-size-mini ssf-rating-count"\x3e'+(0<arguments.length&&
arguments[0]!==k?arguments[0]:"")+"\x3c/span\x3e"};return{getChannelsHtml:function(b,g){var d="";t(b.customShareOptions,function(n){var p=f.extend(n,b.defaultCustomShareOptions);b.customShareBuiltChannels=p;var k=Object.keys(p),h=[],m="",v="";n=function(g){var f=k[g];c&&"copy"===f?b.isUnsignedShareSheetCopyLinkOverrideEnabled?m=B(b,p[f]):b.isAndroidCopyLinkGatingEnabled&&h.push(a(b).then(function(a){a&&(m=B(b,p[f]))})):"more"===f?e&&(v=B(b,p[f])):d+=B(b,p[f])};for(var l=0;l<k.length;l++)n(l);Promise.all(h).then(function(){m&&
(d+=m);v&&(d+=v);g('\n                    \x3cdiv class\x3d"ssf-custom-channels-container a-color-base-background"\x3e\n                        \x3cul class\x3d"ssf-custom-share-options-container a-unordered-list a-nostyle"\x3e\n                            '+d+"\n                        \x3c/ul\x3e\n                    \x3c/div\x3e\n                ")})})},getPreviewImage:function(a){var b=a.starRating,c=a.numberOfReviews,d=r?"r":"";a='\x3cdiv class\x3d"ssf-cso-p-image ssf-regular"\x3e'+q(a.productImage,
"ssf-regular")+"\x3c/div\x3e";b=b?q("RIO"+b+d+".png","ssf-caf-stars"):"";c=n(c);return'\x3cdiv class\x3d"ssf-cso-p-image"\x3e'+a+('\x3cdiv class\x3d"ssf-cso-stickers ssf-regular"\x3e'+b+c+"\x3c/div\x3e")+"\x3c/div\x3e"},getErrorAlert:function(a){return'\x3cdiv class\x3d"ssf-error-text a-row '+b+'"\x3e\n          \x3cdiv class\x3d"a-box a-alert-inline a-alert-inline-error" role\x3d"alert"\x3e\n              \x3cdiv class\x3d"a-box-inner a-alert-container"\x3e\n                  \x3ci class\x3d"a-icon a-icon-alert"\x3e\x3c/i\x3e\n                  \x3cdiv class\x3d"a-alert-content"\x3e\n                    \x3cspan class\x3d"ssf-error-generic '+
b+'"\x3e'+a.taf_custshare_channel_error_generic+'\x3c/span\x3e\n                    \x3cspan class\x3d"ssf-error-email '+b+'"\x3e'+a.taf_custshare_channel_error_email+"\x3c/span\x3e\n                  \x3c/div\x3e\n              \x3c/div\x3e\n          \x3c/div\x3e\n        \x3c/div\x3e"}}});"use strict";u.when("A","SocialShareWidget","SocialShareWidgetAPI","SocialShareWidgetState").register("SocialShareWidgetCustomShareOptions",function(f,t,C,l){var a=f.$;t=t.SocialShareCore;var r=t.ShareSheet,c=
t.Metrics,e=t.Constants,b=void 0,y=void 0,d=void 0,B=void 0,q=!1,n=t.Detection.isAndroid(),v=f.constants.HIDE_CLASS;u.when("mash").execute(function(a){y=a});u.when("SocialShareWidgetTiny").execute(function(a){b=a});u.when("SocialShareWidgetCustomizeUtils").execute(function(a){d=a});u.when("SocialShareWidgetCAFUtils").execute(function(a){B=a});return{init:function(g,p,A,w,t,C){var m=g.customShareBuiltChannels;p=g.isCustomShareOptionsSheetEnabled;var D=p===k?!1:p;p=g.isFallbackShareUrlEnabled;var J=
p===k?!1:p;p=g.caf;var L=p===k?!1:p,x=g.shareDataAttributes;p=g.incrementShareCount;var z=p===k?null:p;p=g.treatment;var ba=p===k?"":p;p=g.weblab;var H=p===k?"":p;p=g.refererURL;var U=p===k?"":p,M="C";g.cafIngressId===e.CAF_INFO_ICON_KEY?M="T1":g.cafIngressId===e.CAF_LEARN_MORE_KEY&&(M="T2");f.on("ssf:event:caf-switch-change",function(a){q=a});var N=function(a){a.addClass("ssf-noclick");a.find(".a-spinner").removeClass(v)},O=function(a){a.removeClass("ssf-noclick");a.find(".a-spinner").addClass(v)},
Q=function(){return q?(g.t["taf-share-caf-messageprefix"]||"")+" "+g.title:g.title},I=function(a,c,e){q?B.prepareShareUrl(g,a,b,c,function(a,b){return e(a,b)}):g&&g.isHmpShareSheet?B.prepareHmpShareUrl(g,a,b,c,function(a,b){return e(a,b)}):d.prepareShareUrl(g,a,b,c,function(a){return e(a)})},F=function(a){a&&f.trigger("ssf:event:caf-share-complete-success",g)},R=function(){y.dispatchEvent({type:"axf:consultAFriend:shareCompletedSuccessfully",detail:{isHmp:!0}})},G=function(a,b,c,d){try{var n=encodeURIComponent(d+
" \n "+c);return"Messages"===b?f.capabilities.ios?"sms:///\x26body\x3d"+n:"mms:?\x26body\x3d"+n:"Email"===b?a=a.replace("\x26url\x3d{url}","").replace("{subject}",encodeURIComponent(g.emailSubject)).replace("{body}",""+n):"whatsApp"===b?a=a.replace("{url}",""+n):a=a.replace("{text}",encodeURIComponent(d)).replace("{url}",encodeURIComponent(c)).replace("{titleAndURL}",encodeURIComponent(n))}catch(ca){return u.log("Failed to generate shareUrl, error: "+ca.toString(),"ERROR",e.SSF_AUI_PACKAGE_ATTRIBUTION),
a}},S=function(a){if(q){c.logCounter("Caf.customShareOptions.ChannelClick."+a);var b="C";g.cafIngressId===e.CAF_INFO_ICON_KEY?b="T1":g.cafIngressId===e.CAF_LEARN_MORE_KEY&&(b="T2");c.logCounter("CAF.edIngress.ChannelClick."+a+"."+b)}else d.imageState.isEmpty()?c.logCounter("CustomShareOptions.ChannelClick."+a):c.logCounter("Books.customShareOptions.ChannelClick."+a)},K=function(){var a=0<arguments.length&&arguments[0]!==k?arguments[0]:"";a=0<a.length?"."+a:"";return q?""+e.CAF_CUSTOM_SHEET_CLICK_LATENCY_METRIC+
a:d.imageState.isEmpty()?""+e.CUSTOM_SHEET_CLICK_LATENCY_METRIC+a:""+e.BOOKS_CUSTOM_SHEET_CLICK_LATENCY_METRIC+a},Z=function(){var a=K();c.startTimer(a);I(e.EMPTY_STRING,!0,function(b){var d=1<arguments.length&&arguments[1]!==k?arguments[1]:"";g.tinyUrl=b;var e=g;d&&(e=f.extend({channelSelectCB:function(){F(d)},cafSwitchEnabled:q},g),e.title=Q());g&&g.isHmpShareSheet&&(e=f.extend({channelSelectCB:function(){R()}},g),e.title=Q());(new r(e)).launch(function(){c.logCounter("customShareOptions.SheetOpen")});
c.stopTimer(a)})},P=function(a,b){var c=l.getAndReset(e.customizeShareStateKey);return{channel:a,refMarker:b,refererURL:U,shareDataAttributes:x,treatment:ba,weblab:H,isCustomShareOptionsSheetEnabled:D,caf:L,cafSwitchEnabled:q,customizeShareCSAData:c,cafEdCXIngressWeblabTreatment:M}};a(".custom-share-native-sheet").unbind("click").click(function(a){try{S("more"),A(),Z()}catch(ea){u.log('Failed to launch native share sheet via "More" button, error: '+ea.toString(),"ERROR",e.SSF_AUI_PACKAGE_ATTRIBUTION)}});
var V=function(a){return new Promise(function(b,c){var g=document.createElement("textarea");g.value=a;document.body.appendChild(g);g.focus();g.select();try{var d=document.execCommand("copy");document.body.removeChild(g);d?b():c()}catch(ca){c(ca)}})},Y=function(b,f,n,p){b=g.shareUrl.refMarker.getClickForChannel(b);c.logCSAEvent(e.CSA_HIT_TYPE.SHARE,P("copy",b));q?c.logCounter("Caf.CustomShareOptions.CopySuccess"):d.imageState.isEmpty()?c.logCounter("customShareOptions.CopySuccess"):c.logCounter("Books.CustomShareOptions.CopySuccess");
a(".ssf-feedback").show();O(f);A();c.stopTimer(n);p&&F(p);g&&g.isHmpShareSheet&&R();"function"===typeof z&&z(b)},W=function(a,b,e){c.stopTimer(e);q?c.logCounter("Caf.CustomShareOptions.CopyFail"):d.imageState.isEmpty()?c.logCounter("CustomShareOptions.CopyFail"):c.logCounter("Books.CustomShareOptions.CopyFail");C({shareData:g,channelRef:a,caf:L,cafSwitchEnabled:q});O(b)};a(".custom-share-copy").unbind("click").click(function(b){var g=this;try{(function(){var b=K();c.startTimer(b);S("copy");var d=
e.CUSTOM_SHARE_OPTIONS_CP_CHANNEL_REF,f=a(g);N(f);I(d,!1,function(a){var c=1<arguments.length&&arguments[1]!==k?arguments[1]:"";n?V(a).then(function(){return Y(d,f,b,c)},function(){return W(d,f,b)}):n||navigator.clipboard.writeText(a).then(function(){return Y(d,f,b,c)},function(){return W(d,f,b)})})})()}catch(X){u.log("Failed to share using copy channel, error: "+X.toString(),"ERROR",e.SSF_AUI_PACKAGE_ATTRIBUTION)}});a(".ssf-custom-share-option:not(.custom-share-copy,.custom-share-native-sheet)").unbind("click");
a(".ssf-custom-share-option:not(.custom-share-copy,.custom-share-native-sheet)").click(function(b){var d=this;try{(function(){var b=a(d),f=b.data("name"),n=K(),p=K(f);c.startTimer(n);c.startTimer(p);var l=m[f],w=e.CUSTOM_SHARE_OPTIONS_REF_PREFIX+"_"+l.ref,r=g.shareUrl.refMarker.getClickForChannel(w);a(".ssf-error-text").addClass(v);N(b);I(w,!0,function(a){var d=1<arguments.length&&arguments[1]!==k?arguments[1]:"",m=G(l.shareUrl,l.label,a,Q());y?y.launchIntentURL({url:m,successCallback:function(){c.stopTimer(n);
c.stopTimer(p);O(b);A();c.logCounterRefactor("ChannelClick",x.ingress);c.logCounter("ChannelClick");S(f);"function"===typeof z&&z(r);d&&F(d);g&&g.isHmpShareSheet&&R();c.logCSAEvent(e.CSA_HIT_TYPE.SHARE,P(f,r))},failCallback:function(g){u.log("Failed to launch intent URL "+m+" with error code: "+g.code,"WARN",e.SSF_AUI_PACKAGE_ATTRIBUTION);c.logCounter("customShareOptions.LaunchShareIntentFail");O(b);c.stopTimer(n);c.stopTimer(p);J&&l.fallbackShareUrl?(c.logCSAEvent(e.CSA_HIT_TYPE.SHARE,P(f,r)),h.location=
G(l.fallbackShareUrl,l.label,a,Q())):(A(),Z())}}):(O(b),c.logCSAEvent(e.CSA_HIT_TYPE.SHARE,P(f,r)),A(),h.open(m,"_blank"))})})()}catch(X){u.log("Failed to share, error: "+X.toString(),"ERROR",e.SSF_AUI_PACKAGE_ATTRIBUTION)}})}}});"use strict";u.when("A","SocialShareWidgetState","atf").execute(function(f,k){var h=f.$("#ssf-primary-widget-desktop");f=f.$("#ssf-share-action");h=h.data("ssfShareIcon")||f.data("ssfShareIcon")||{};k.set("shareAapiCsrfToken",h.shareAapiCsrfToken);k.set("aapiBaseUrl",h.aapiBaseUrl);
k.set("dpx",!0)});"use strict";u.when("A","SocialShareWidget").execute(function(f,k){var h=void 0,l=k.SocialShareCore.Metrics;k=f.debounce(function(){clearTimeout(h)},200,!0);f.declarative("ssf-share-icon","touchstart",function(){h=setTimeout(function(){l.logCounter("longpress")},500)});f.declarative("ssf-share-icon","touchmove touchend",k)});"use strict";u.when("A","SocialShareWidget").register("SocialShareWidgetMetrics",function(f,h){var t=h.SocialShareCore.Metrics,l=function(a){a=a.pathname.split("/").filter(function(a){return f.contains(a,
"ref\x3d")});return(a.length?a[0]:"").replace("ref\x3d","")},a=function(a){return(a=a.match(/cm_sw_r_(?:cso_)?(.*?)_/))?a[1]:k};u.now("SocialShareWidgetLoadedBTF").execute(function(a){a?t.logCounter("btf:render"):t.logCounter("atf:render")});u.when("atf").execute(function(){try{var k=f.capabilities,c=k.tablet;k.isIE&&t.logCounter("render.ie");(c||600<screen.width&&k.isAmazonApp)&&t.logCounter("render.tablet");var e=new URL(location.href);if(e.href.includes("cm_sw_r_")){var b=e.searchParams.get("ref")||
e.searchParams.get("ref_");b||(b=l(e));if(b.startsWith("cm_sw_r_")){var h=a(b);h&&t.logCounter("return.visit."+h);t.logCounter("return.visit")}}e.searchParams.get("cafId")&&t.logCounter("CAF.cafDeepLink")}catch(d){t.logCounter("urlparam.issue")}});return{getRefEq:l,getChannelFromRef:a}});"use strict";u.register("SocialShareWidgetLinkUtil",function(){return{getLinkWithFlippedStarsLeft:function(f){try{var k=new URL(f.href||f),h=k.searchParams;if(h.get("ref_")&&h.get("starsLeft")){var l=h.get("ref_"),
a=h.get("starsLeft"),r=h.get("newPreview"),c=h.get("skipTwisterOG"),e=h.get("bestFormat"),b=h.get("language");h.delete("ref_");h.delete("starsLeft");h.delete("newPreview");h.delete("skipTwisterOG");h.delete("bestFormat");h.delete("language");k.searchParams.append("ref_",l);k.searchParams.append("starsLeft",a);r&&k.searchParams.append("newPreview",r);c&&k.searchParams.append("skipTwisterOG",c);e&&k.searchParams.append("bestFormat",e);b&&k.searchParams.append("language",b)}return k.toString()}catch(y){return f.toString()}}}});
"use strict";u.when("A","SocialShareWidget","SocialShareWidgetAPI","SocialShareWidgetCustomizeUtils").register("SocialShareWidgetCustomize",function(f,t,C,l){t=t.SocialShareCore;var a=f.$,r=t.ShareSheet,c=t.Url,e=t.Metrics,b=t.Constants,y=e.getMetricName(a,b.customize),d=f.constants.HIDE_CLASS,B=function(){},q,n=0,v=void 0,g=void 0,p=void 0,A=!1;u.when("a-checkbox").execute(function(a){return g=a});u.when("a-button").execute(function(a){return v=a});try{(function(){var w=l.imageState;f.declarative("cafCheckboxAction",
"change",function(){p()});f.on(l.getEventName("Hide"),function(a){a.sheet.getContentContainer().remove();w.clear()});f.on("a:sheet:afterShow:ssf-customize-bottom-sheet",function(a){L(a.sheet)});var t=function(b,c,g){var d=a(".ssf-preview-container"),k=a(".ssf-caf-preview"),n=(q=c)?"CAF.switchOn":"CAF.switchOff";e.logCounter(y,n);e.logCounterRefactor(n,g);f.trigger("ssf:event:caf-switch-change",c);w.isConsultAFriendPreview=c;g=l.getImageData(b,w);A?l.getBackendPreviewImage(b,g,function(a){a?E(a):f.trigger("ssf:event:preview-generation-failed",
b)}):c?(k.fadeIn(100),d.hide()):(d.fadeIn(100),k.hide())},D=function(a){var b=a.shareData,c=a.channelRef,g=b.shareUrl;a=b.isOGTEnabled;a=a===k?!1:a;var d=b.aapiBaseUrl;d=d===k?"":d;var f=b.shareAapiCsrfToken;f=f===k?"":f;var e=b.tinyUrlEnabled;e=e===k?!1:e;var p=b.deeplinkInfo;p=p===k?{}:p;var h=b.shareDataAttributes,m=b.storeId;m=m===k?"":m;g.refMarker.isBestFormatEnabled=b.isBestFormatEnabled;c=c?g.getReturnForChannel(c):g.return;g=h.marketplaceId;return{tinyUrlEnabled:e,aapiBaseUrl:d,shareAapiCsrfToken:f,
marketplaceId:g===k?"":g,url:c,isOGTEnabled:a,originalUrl:b.url||c,refMarkerId:n++,deeplinkInfo:p,storeId:m}},m=function(g,n,p,m,l,w,A){var x=p.shareDataAttributes,q=p.url,t=x.asin,z=x.ingress;x=p.refId;a(".ssf-customize-share-btn").find(".a-spinner").addClass(d);v(".ssf-customize-share-btn").enable();n();var J=!1;n=new URL(w===k?q:w);m&&(x=b.CAF_REF_PREFIX+"_"+x,n.searchParams.append("cafId",m),n.searchParams.append("cafASIN",l),l!==t&&e.logCounter(y,"CAF.ShareASINMismatch"),J=!0);n.searchParams.append("language",
h.languageOfPreference||p.locale||"en_US");p.shareUrl=new c(n.toString(),x);var B=D({shareData:p});u.when("SocialShareWidgetTiny").execute(function(a){a.fetch({data:B,callback:function(a){p.tinyUrl=a;A&&A();a=f.extend({channelSelectCB:function(){m&&f.trigger("ssf:event:caf-share-complete-success",p)},cafSwitchEnabled:J},p);(new r(a)).launch(function(){f.delay(function(a){g(p)},100);m?(e.logCounter(y,"CAF.ShareSheetOpen"),e.logCounterRefactor("CAF.ShareSheetOpen",z)):(e.logCounter(y,"ShareSheetOpen"),
e.logCounterRefactor("ShareSheetOpen",z))})}})})},E=function(a){if(!(1<arguments.length&&arguments[1]!==k&&arguments[1])){var b=new Image;b.src=a;b.onload=function(){w.productImageProperties.width=this.width;w.productImageProperties.height=this.height}}},G=function(a){a=a.popularHighlightStrings;var b=[];b.push({id:"BackgroundImageTab",physicalId:"417kcYISTOL.jpg",url:"https://m.media-amazon.com/images/I/417kcYISTOL.jpg"});a.length&&(defaultQuote=a[0].replace(/"|”|“/g,""),b.push({id:"BookQuotesTab",
value:defaultQuote}));return b},L=function(a){var b=a.$contentContainer,c=parseInt(a.$container.css("max-height"));b=parseInt(b.height());c<b?(a.$contentContainer.css("height",c),e.logCounter("SmallDevice")):a.$contentContainer.css("height","auto")};B=function(c,n,h,r){var D=c.shareDataAttributes,x=c.treatment,J=x===k?"":x;x=c.weblab;var z=x===k?"":x;x=c.caf;x=x===k?!1:x;var B=c.isCafPreviewGenerationMigrationEnabled,I=D.ingress;w.currentPreview=l.getRegularImage();q=c.cafSwitch;x&&B&&(A=!0);x=function(a,
b){0<b.length&&b.forEach(function(a){w.set(a)})};var F=function(a){e.logCounter(y,a);e.logCounterRefactor(a,I);e.logCounter(a)},H=function(b,c){C.build(b).fetchTabs(function(g){u.now("SocialShareWidgetCustomizeTemplate").execute(function(d){a(".ssf-tabs").html(d.getTabs(b,g));c(g)})})};p=function(){var a=g(".ssf-caf-toggle");t(c,a.isChecked(),I)};c.customize&&c.customizePreSelected?(B=G(c),w.defaultCustomizationOptions=B,x(c,B),x=l.getImageData(c,w),l.getBackendPreviewImage(c,x,function(a){w.currentImage=
a;E(a);l.adjustPreviewHeight();L(r)})):A?(x=l.getImageData(c,w),l.getBackendPreviewImage(c,x,function(a){a?E(a):f.trigger("ssf:event:preview-generation-failed",c)})):t(c,q,I);a(".ssf-customize-share-btn").click(function(){v(".ssf-customize-share-btn").isEnabled()&&(a(".ssf-customize-share-btn").find(".a-spinner").removeClass(d),v(".ssf-customize-share-btn").disable(),q?(F("CAF.shareClick"),e.startTimer("CAF.fetchCAFAndTinyURL"),c.title=(c.t["taf-share-caf-messageprefix"]||"")+" "+c.title,C.build(c).fetchCAFID(function(a,
b,g){m(n,h,c,a,b,g,function(){e.stopTimer("CAF.fetchCAFAndTinyURL")})})):(F("shareClick"),e.logCSAEvent(b.CSA_HIT_TYPE.CUSTOMIZE_SHARE,{channel:b.EMPTY_STRING,refMarker:c.shareUrl.refMarker.click,shareDataAttributes:D,treatment:J,weblab:z}),m(n,h,c)))});a(".ssf-caf-toggle-ed-ingress").click(function(){var a="C";c.cafIngressId===b.CAF_INFO_ICON_KEY?a="T1":c.cafIngressId===b.CAF_LEARN_MORE_KEY&&(a="T2");F("CAF.edIngressTapped"+a);l.transitionToCAFEducationPage();L(r)});a(".ssf-customize-icon").click(function(){v(this).isEnabled()&&
(F("CustomizeButtonClick"),v(this).disable(),w.currentPreview=l.getCustomizeImage(),H(c,function(b){b.forEach(function(b){var c="input[type\x3dradio][name\x3d"+b.id+"]";a(c).change(function(b){b=JSON.parse(b.target.value);T(b);a(c).unbind("click");a(this).one("click",function(a){a=a.target;a.checked=!1;a=JSON.parse(a.value);S(a)})})});c.customizePreSelected&&(a("#BackgroundImageTab1").trigger("click"),a("#BookQuotesTab0").trigger("click"));b=l.getImageData(c,w);l.getBackendPreviewImage(c,b,function(a){w.currentImage=
a;l.transitionToCustomizePage();l.adjustCustomizedPreviewHeight();L(r);E(a)})}))});a(".ssf-customize-edit-poll-btn").click(function(){v(this).isEnabled()&&(v(this).disable(),f.trigger("ssf-edit-your-poll-trigger",c.hmpState),F("HMP.EditYourPoll.Clicked"),h())});var T=function(a){l.setImage();Array.isArray(a)?a.forEach(function(a){w.set(a)}):w.set(a);var b=l.getImageData(c,w);F(a.id+"Select");l.getBackendPreviewImage(c,b,function(a){w.currentImage=a;E(a)})},S=function(a){l.setImage();F(a.id+"Unselect");
w.unset(a);a=l.getImageData(c,w);l.getBackendPreviewImage(c,a,function(a){w.currentImage=a;E(a)})};a(".ssf-back-btn").click(function(){l.isCAFEducationPageVisible()&&(c.cafIngressId===b.CAF_INFO_ICON_KEY?F("CAF.edBackTappedT1"):c.cafIngressId===b.CAF_LEARN_MORE_KEY?F("CAF.edBackTappedT2"):F("CAF.edBackTappedC"));w.currentPreview=l.getRegularImage();e.logCounter("BackButtonClick");l.resetPreviewState(w);l.transitionToDefaultPage();L(r)});u.when("a-checkbox").execute(function(b){a(".ssf-caf-toggle-label").click(function(){var a=
b(".ssf-caf-toggle");a.check(!a.isChecked())})});f.on("ssf:event:preview-generation-failed",function(b){A=!1;a(".ssf-backend-preview").addClass(d);a(".ssf-html-preview").removeClass(d);t(b,q,I)})}})()}catch(w){e.logCounter(y,"Error"),e.logLoad("Error"),e.logFatal("Error loading Customize widget, Share Framework AUI: "+w.toString())}finally{e.logCounter(y,"Render"),e.logLoad("Render")}return{init:B}});"use strict";u.when("A","SocialShareWidget").register("SocialShareWidgetCustomizeTemplate",function(f,
h){var t=f.capabilities.rtl,l=h.SocialShareCore.Constants,a=function(a){var b=1<arguments.length&&arguments[1]!==k?arguments[1]:"";a=a.startsWith("http")?a:"https://m.media-amazon.com/images/G/01/share-icons/"+a;return'\x3cimg class\x3d"'+b+'" src\x3d"'+a+'"/\x3e'},r=function(a){var b=1<arguments.length&&arguments[1]!==k?arguments[1]:"ssf-product-title-text";f.on("a:sheet:afterShow:ssf-customize-bottom-sheet",function(){f.$(".ssf-title-label").text(a.title)});return'\x3cdiv class\x3d"a-color-secondary a-padding-small '+
b+'"\x3e\n      \x3cspan class\x3d"ssf-title-label" id\x3d"ssf-title-label"\x3e\n        \x3c!-- TITLE  --\x3e\n      \x3c/span\x3e\n    \x3c/div\x3e'},c=function(a){return'\x3cdiv class\x3d"ssf-product-preview"\x3e'+e(a.productImage,"","","ssf-title-label")+"\x3c/div\x3e"},e=function(b){var c=1<arguments.length&&arguments[1]!==k?arguments[1]:"",g=2<arguments.length&&arguments[2]!==k?arguments[2]:"",d=3<arguments.length&&arguments[3]!==k?arguments[3]:"";b=b.startsWith("http")?b:"https://m.media-amazon.com/images/G/01/share-icons/"+
b;return g||d?'\x3cimg class\x3d"'+c+'" '+(d?'aria-labelledby\x3d"'+d+'"':"")+" "+(g?'aria-label\x3d"'+g+'"':"")+' src\x3d"'+b+'"/\x3e':a(b,c)},b=function(){return'\x3cspan class\x3d"a-size-mini ssf-rating-count"\x3e'+(0<arguments.length&&arguments[0]!==k?arguments[0]:"")+"\x3c/span\x3e"},y=function(a){return'\x3cul class\x3d"ssf-options-box-container a-unordered-list a-nostyle"\x3e'+a.values.map(function(b,c){var g=f.extend(b,{id:a.id}),d={id:a.id,position:c,val:g,background:b.url};a.isQuote&&(d=
f.extend(d,{center:!0,width:150,content:g.displayText,background:k}));g=d.id;c=d.position;b=d.content;b=b===k?"":b;var e=d.width,h=e===k?100:e,n=d.background;e=d.center;e=e===k?!1:e;d=d.val;h='style\x3d"width: '+h+"px;background-image: url("+(n===k?"":n)+");background-size: "+h+"px "+h+'px;"';n=JSON.stringify(d);c=g+c;d=d.label||"";var m='\x3cspan class\x3d"aok-offscreen"\x3e'+d+"\x3c/span\x3e";e&&(m='\x3cspan class\x3d"a-box-inner a-text-center ssf-q-text"\x3e'+b+"\x3c/span\x3e");return'\x3cli class\x3d"ssf-options-box" aria-label\x3d\''+
d+"'\x3e\n              \x3cinput id\x3d\""+c+'" type\x3d"radio" name\x3d"'+g+"\" value\x3d'"+n+"' aria-label\x3d'"+d+"'\x3e\x3c/input\x3e\n              \x3clabel for\x3d\""+c+'" class\x3d"a-box a-text-normal" '+h+"\x3e"+m+"\x3c/label\x3e\n            \x3c/li\x3e"}).join("")+"\x3c/ul\x3e"},d=function(a){var b=1<arguments.length&&arguments[1]!==k?arguments[1]:"",c=2<arguments.length&&arguments[2]!==k?arguments[2]:!1;return'\x3cli class\x3d"a-tab-heading ssf-customize-tab '+(c?"a-active":"")+'" data-a-tab-name\x3d"ssf-tab-'+
a+'" role\x3d"presentation"\x3e\n              \x3ca aria-label\x3d"'+b+'" href\x3d"#" role\x3d"tab" aria-selected\x3d"'+(c?"true":"false")+'" '+(c?"":'tabindex\x3d"-1"')+"\x3e"+b+"\x3c/a\x3e\n            \x3c/li\x3e"},u=function(a){return'\x3cdiv data-a-name\x3d"ssf-tab-'+a+'" class\x3d"ssf-tab-'+a+" a-box a-box-tab a-tab-content "+(3<arguments.length&&arguments[3]!==k&&arguments[3]?"":"a-hidden")+' a-padding-mini" role\x3d"tabpanel" tabindex\x3d"0"\x3e\n              '+(1<arguments.length&&arguments[1]!==
k?arguments[1]:"")+"\n            \x3c/div\x3e"},q=function(){return(0<arguments.length&&arguments[0]!==k?arguments[0]:[]).map(function(a){a=a.replace(/"|”|“/g,"");return{displayText:"“"+a+"”",value:a}})};return{getTabs:function(a,b){var c=a.popularHighlightStrings;if(!b.length)return"";var e="",f="",k=-1;b.forEach(function(a,b){a.isQuote&&(a.values=q(c));if(!a.values.length)return"";-1===k&&(k=b);b=b===k;e+=d(a.id,a.heading,b);f+=u(a.id,y(a),a.text,b)});return'\x3cdiv class\x3d"a-tab-container a-size-small"\x3e'+
('\x3cul data-action\x3d"a-tabs" class\x3d"a-tabs a-declarative ssf-customize-tab a-spacing-small" role\x3d"tablist" data-a-tabs\x3d\'{"name": "customize-tabs"}\'\x3e\n        '+e+"\x3c/ul\x3e"+f)+"\x3c/div\x3e"},getCustomizeBox:function(a){return'\x3cdiv class\x3d"a-box a-color-alternate-background a-spacing-top-large a-padding-base ssf-customize-box"\x3e\n      '+('\x3ch5 class\x3d"a-size-small a-spacing-micro"\x3e'+a.taf_custshare_customizelong+"\x3c/h5\x3e")+('\x3cp class\x3d"a-size-small a-color-secondary"\x3e'+
a.taf_custshare_customizedesc+"\x3c/p\x3e")+('\x3cspan class\x3d"a-button a-button-small" id\x3d"ssf-customize-share"\x3e\n      \x3cspan class\x3d"a-button-inner"\x3e\n        \x3cbutton class\x3d"a-button-text" type\x3d"button"\x3e'+a.taf_custshare_customizeshort+"\x3c/button\x3e\n      \x3c/span\x3e\n    \x3c/span\x3e")+"\n    \x3c/div\x3e"},getBackArrow:function(a){a=a["taf-share-general-gobacktopage"]||"";return'\x3cbutton type\x3d"button" class\x3d"ssf-back-btn a-padding-small" aria-label\x3d"'+
a+'" tabindex\x3d"0"\x3e'+('\x3cimg src\x3d"https://m.media-amazon.com/images/G/01/share-icons/arrow-left.svg" alt\x3d"'+a+'"\x3e')+"\x3c/button\x3e"},tabsContainer:'\x3cdiv class\x3d"a-row a-spacing-top-micro ssf-tabs a-color-base-background a-padding-mini"\x3e\x3c/div\x3e',getImageSection:function(d){var f=r(d);var g=d.isCafPreviewGenerationMigrationEnabled;var h=d.customize,l=d.customizePreSelected;g=d.caf&&g?!0:h&&l?!0:!1;h='\x3cdiv class\x3d"a-padding-base ssf-preview-container"\x3e\n      '+
(d.customize?'\x3cspan id\x3d"ssf-customize-icon" class\x3d"ssf-customize-icon"\x3e'+a("customize")+"\x3c/span\x3e":"")+'\n      \x3cspan class\x3d"a-spinner a-spinner-medium a-align-center ssf-preview-spinner aok-hidden"\x3e\x3c/span\x3e\n    \x3c/div\x3e';g='\x3cdiv class\x3d"a-box ssf-preview-box"\x3e\n              \x3cdiv class\x3d"ssf-backend-preview '+(g?"":"aok-hidden")+'"\x3e'+h+'\x3c/div\x3e\n              \x3cdiv class\x3d"ssf-html-preview '+(g?"aok-hidden":"")+'"\x3e';var n=d.customize;
l=d.t;h=c({productImage:d.productImage});var q=d.starRating,y=q===k?"ZERO":q;q=d.customize;q=q===k?!1:q;var m=d.numberOfReviews,u=d.cafStarAlignmentLeft;d=d.isUnrecognizedUsersRichPreviewEnabled;y=e("RIO"+y+(t?"r":"")+".png","ssf-caf-stars",y+" star rating");m=b(m);d='\x3cdiv class\x3d"ssf-caf-rating"\x3e\n              \x3cdiv class\x3d"'+(u||d||q?"ssf-caf-rating-left":"ssf-caf-rating-right")+'"\x3e\n                '+y+m+"\n              \x3c/div\x3e\n            \x3c/div\x3e";n=n?'\x3cspan id\x3d"ssf-customize-icon" class\x3d"ssf-customize-icon"\x3e'+
a("customize")+"\x3c/span\x3e":"";l='\x3cp class\x3d"a-size-base a-spacing-micro ssf-caf-text"\x3e'+l.taf_custshare_caf_recipientemoji+"\x3c/p\x3e";q=e("caf-emojis"+(t?"r":"")+".png","ssf-caf-emojis","A heart eyes emoji, a thinking emoji, and a frowning emoji");return g+('\x3cdiv class\x3d"a-padding-base ssf-preview-container"\x3e\n              '+n+'\n              \x3cspan class\x3d"a-spinner a-spinner-medium a-align-center ssf-preview-spinner aok-hidden"\x3e\x3c/span\x3e\n              '+h+"\n              "+
d+"\n            \x3c/div\x3e "+('\x3cdiv class\x3d"ssf-caf-preview"\x3e\n              \x3cdiv class\x3d"a-padding-base ssf-caf-image"\x3e\n                \x3cdiv class\x3d"a-row ssf-caf-image-stickers"\x3e'+h+('\x3cdiv class\x3d"a-column ssf-caf-stickers"\x3e'+l+q+"\x3c/div\x3e")+"\x3c/div\x3e\n                  "+d+"\n                \x3c/div\x3e\n            \x3c/div\x3e"))+"\x3c/div\x3e\n              "+f+"\n            \x3c/div\x3e"},getHmpImageSection:function(a){var b='\x3cdiv class\x3d"a-color-secondary a-padding-small ssf-title-text-hmp"\x3e\n    \x3cspan\x3e\n    '+
a.hmpState.title+"\n    \x3c/span\x3e\n    \x3c/div\x3e";return'\x3cdiv class\x3d"a-box ssf-preview-box"\x3e\n                '+c({productImage:a.productImage})+"\n                "+b+"\n            \x3c/div\x3e"},getCustomizePreviewImage:function(a){return'\x3cdiv class\x3d"a-box ssf-no-border ssf-cus-img-container"\x3e\n      \x3cdiv class\x3d"ssf-cus-img"\x3e\x3cspan class\x3d"a-spinner a-spinner-medium a-align-center ssf-preview-spinner aok-hidden"\x3e\x3c/span\x3e\x3c/div\x3e\n      '+r(a,"ssf-product-title-text-small")+
"\n    \x3c/div\x3e"},getToggleContainer:function(b){var c=2<arguments.length&&arguments[2]!==k?arguments[2]:"",d=(1<arguments.length&&arguments[1]!==k?arguments[1]:"").match(/^T(\d+)$/);d=b["taf_custshare_caf_ingress"+(d?"_alt"+d[1]:"")];var e='\x3csmall\x3e\x3ca class\x3d"ssf-caf-toggle-ed-ingress a-size-base a-link-normal"\x3e'+(b.taf_custshare_caf_ingress_learn_more||"Learn more")+"\x3c/a\x3e\x3c/small\x3e",f=a("https://m.media-amazon.com/images/G/01/AppFirst/ConsultAFriend/information-default.png");
return'\x3cdiv class\x3d"a-row a-spacing-top-medium-plus a-grid-vertical-align a-grid-center a-spacing-micro"\x3e\n      \x3cdiv class\x3d"a-column a-span1"\x3e\x3cdiv class\x3d"a-checkbox a-declarative a-checkbox-fancy ssf-caf-toggle" data-action\x3d"cafCheckboxAction"\x3e\n      \x3clabel class\x3d"a-padding-none" aria-labelledby\x3d"caf-checkbox-label"\x3e\n        \x3cinput class\x3d"a-declarative" name\x3d"caf" type\x3d"checkbox"\x3e\n        \x3ci class\x3d"a-icon a-icon-checkbox"\x3e\x3c/i\x3e\n      \x3c/label\x3e\n    \x3c/div\x3e\n  \x3c/div\x3e\n      \x3cdiv class\x3d"a-column a-span10"\x3e\n        \x3csmall id\x3d"caf-checkbox-label" class\x3d"ssf-caf-toggle-label a-size-base"\x3e'+
d+".\x3c/small\x3e\n        "+(c===l.CAF_INFO_ICON_KEY?'\x3cspan class\x3d"ssf-info-icon ssf-caf-toggle-ed-ingress"\x3e\x3cstrong\x3e'+f+"\x3c/strong\x3e\x3c/span\x3e":c===l.CAF_LEARN_MORE_KEY?e:"")+"\n      \x3c/div\x3e\n    \x3c/div\x3e"},getEducationCXBody:function(a){return'\x3cdiv class\x3d"a-box ssf-no-border"\x3e\n        '+('\x3cdiv class\x3d"a-color-secondary a-padding-small"\x3e\n      \x3cspan\x3e\n        '+(a.taf_custshare_caf_education_body||"Ask your friends for help. Use this option to ask friends to react to the item with an emoji. You can share the link by messaging your friends or posting on social media. You’ll get a notification for each reaction.")+
"\n      \x3c/span\x3e\n    \x3c/div\x3e")+'\n        \x3cdiv class\x3d"ssf-caf-education-video a-padding-base"\x3e\n          \x3cvideo id\x3d"ssf-caf-education-video" loop playsinline\x3e\n            \x3csource src\x3d"https://m.media-amazon.com/images/G/01/AppFirst/ConsultAFriend/caf-education-no-audio.mp4" type\x3d"video/mp4"\x3e\n          \x3c/video\x3e\n        \x3c/div\x3e\n      \x3c/div\x3e'}}});"use strict";var da="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(f){return typeof f}:
function(f){return f&&"function"===typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f};u.when("A","SocialShareWidget","SocialShareWidgetAPI","SocialShareWidgetState").register("SocialShareWidgetCustomizeUtils",function(f,t,u,l){function a(a){var b=a.values,c=b.BackgroundImageTab,d=b.DeviceCoverImageTab,g=b.BookQuotesTab;b=b.isConsultAFriendPreview;var e=a.productImageProperties;a=e.width;e=e.height;return{bgId:(c===k?{}:c).physicalId||"",deviceId:(d===k?{}:d).physicalId||
"",quoteValue:(g===k?{}:g).value||"",isConsultAFriendPreview:b===k?!1:b,width:a===k?"":a,height:e===k?"":e}}function r(a,c){var d=a.shareUrl,g=a.socialLinks,e=g===k?{}:g;g=a.isOGTEnabled;g=g===k?!1:g;d.refMarker.isBestFormatEnabled=a.isBestFormatEnabled;d=c?d.getReturnForChannel(c):d.return;c=c.replace(B.CUSTOM_SHARE_OPTIONS_REF_PREFIX+"_","");e=e.shareframework||a.url;var f=a.aapiBaseUrl;f=f===k?"":f;var h=a.shareAapiCsrfToken;h=h===k?"":h;var l=a.tinyUrlEnabled;l=l===k?!1:l;var p=a.deeplinkInfo;
p=p===k?{}:p;var n=a.isOnShareGatingEnabled;n=n===k?!1:n;var q=a.shareDataAttributes;a=q.marketplaceId;a=a===k?"":a;q=q.asin;q=q===k?"":q;var r=b();return{tinyUrlEnabled:l,aapiBaseUrl:f,shareAapiCsrfToken:h,marketplaceId:a,asin:q,url:d,osType:r,isOGTEnabled:g,originalUrl:e||d,refMarkerId:v++,deeplinkInfo:p,isOnShareGatingEnabled:n,extractedRef:c}}function c(a,b,c,d){if(c.isEmpty()||da(c.currentImage)===k||da(c.currentImage)!==k&&!c.currentImage.length)return d({});c=encodeURIComponent(c.currentImage);
u.build(a).externalizeImage(c,d,b)}function e(a,b,c){u.build(a).generateImage(b,function(a){c(a.entity)})}function b(){switch(!0){case f.capabilities.ios:return"ios";case f.capabilities.android:return"android";default:return"unknown"}}t=t.SocialShareCore;var y=f.constants.HIDE_CLASS,d=f.$,B=t.Constants,q=t.Metrics,n=t.Url,v=0;return{getEventName:function(a){return"a:sheet:after"+a+":ssf-customize-bottom-sheet"},getCustomizeImage:function(){return d(".ssf-cus-img")},getCustomizeImageContainer:function(){return d(".ssf-cus-img-container")},
getRegularImage:function(){return d(".ssf-backend-preview .ssf-preview-container")},getPreviewBox:function(){return d(".ssf-preview-box")},setImage:function(a){this.imageState.currentPreview.css("background-image",'url("'+a+'")')},showSpinner:function(){this.imageState.currentPreview.find(".a-spinner").removeClass(y)},hideSpinner:function(){this.imageState.currentPreview.find(".a-spinner").addClass(y)},transitionToCustomizePage:function(){d(".ssf-customize-container-one").addClass(y);d(".ssf-customize-container-two").removeClass(y).addClass("ssf-customize-transition")},
transitionToCAFEducationPage:function(){d(".ssf-customize-container-one").addClass(y);d(".ssf-customize-container-three").removeClass(y).addClass("ssf-customize-transition");var a=d("#ssf-caf-education-video").get(0);a&&(a.currentTime=0,a.play())},isCAFEducationPageVisible:function(){return d(".ssf-customize-container-three").is(":visible")},adjustCustomizedPreviewHeight:function(){this.getCustomizeImageContainer().css({width:.76*h.innerWidth});var a=parseInt(this.getCustomizeImage().css("border-left-width"))+
parseInt(this.getCustomizeImage().css("border-right-width")),b=this.getCustomizeImage().innerWidth();this.getCustomizeImage().css({height:(b+a)/1.91})},adjustPreviewHeight:function(){this.getPreviewBox().css({width:.93*h.innerWidth});var a=parseInt(this.getRegularImage().css("border-left-width"))+parseInt(this.getRegularImage().css("border-right-width")),b=this.getRegularImage().innerWidth();this.getRegularImage().css({height:(b+a)/1.91})},transitionToDefaultPage:function(){d(".ssf-customize-container-two").addClass(y);
d(".ssf-customize-container-three").addClass(y);d(".ssf-customize-container-one").removeClass(y).addClass("ssf-customize-transition-back")},getImageData:function(b,c){var d=a(c);return{productImageUrl:b.productImage,starRating:b.starRating||"",numberOfReviews:b.numberOfReviews||"",backgroundImagePhysicalId:d.bgId,deviceCoverImagePhysicalId:d.deviceId,bookQuote:d.quoteValue,productImageWidth:d.width,productImageHeight:d.height,consultAFriendPreviewEnabled:c.isConsultAFriendPreview,previewDohEnabled:b.previewDoh}},
resetPreviewState:function(a){a.clear();0<a.defaultCustomizationOptions.length&&a.defaultCustomizationOptions.forEach(function(b){a.set(b)})},getBackendPreviewImage:function(a,b,c){var d=this;d.setImage("");d.showSpinner();e(a,b,function(a){a&&"SUCCEEDED"===a.status?(a=a.customizedImage.url,d.hideSpinner(),d.setImage(a),c(a)):c()})},setCustomizeCSAData:function(b,c){var d=B.customizeShareStateKey;c=a(c);var e=B.TRUE,g=B.FALSE;l.set(d,{backgroundImagePhysicalId:c.bgId,deviceCoverImagePhysicalId:c.deviceId,
hasQuote:0<c.quoteValue.length?e:g,isCustomizedExperienceEnabled:b.customize?e:g,isCustomized:c.bgId||c.deviceId||c.quoteValue?e:g,customizePreSelected:b.customizePreSelected?e:g,isQuotesAvailable:b.popularHighlightStrings?e:g})},prepareShareUrl:function(a,b,d,e,f){this.setCustomizeCSAData(a,this.imageState);c(a,e,this.imageState,function(c){var g=c.entity;c=new URL(a.url);var h=b;g&&g.physicalId?(q.logCounterRefactor("externalizeImageSuccess"),c.searchParams.append("cspi",g.physicalId),h=b+"_"+B.BOOKS_REF_PREFIX):
(a.customizePreSelected&&(q.logCounter("booksPreviewNotAvailable"),h=b+"_"+B.BOOKS_REF_PREFIX+"_"+B.BOOKS_CUSTOMIZE_PREVIEW_NOT_AVAILABLE),(a.cafStarAlignmentLeft||a.isUnrecognizedUsersRichPreviewEnabled||a.customize)&&c.searchParams.append("starsLeft","1"),a.eventPreviewTreatment&&"c"!==a.eventPreviewTreatment.toLowerCase()&&(g=a.eventPreviewTreatment.match(/^T(\d+)$/),c.searchParams.append("peakEvent",g[1]),q.logCounterRefactor("EventPreview"+a.eventPreviewTreatment,a.shareDataAttributes.ingress)));
a.shareUrl=new n(c.toString(),a.refId);c=r(a,h);d.fetch({data:c,isAsync:e,callback:function(a){f(a)}})})},imageState:{clear:function(){this.values={}},isEmpty:function(){return d.isEmptyObject(this.values)},values:{},unset:function(a){delete this.values[a.id]},set:function(a){this.values[a.id]=a},defaultCustomizationOptions:[],currentImage:"",isConsultAFriendPreview:!1,currentPreview:"",productImageProperties:{width:0,height:0}}}});"use strict";u.when("A","SocialShareWidget","SocialShareWidgetAPI").register("SocialShareWidgetCAFUtils",
function(f,t,u){function l(b,c){var d=b.shareUrl,f=b.socialLinks;f=f===k?{}:f;var l=b.isOGTEnabled;l=l===k?!1:l;d.refMarker.isBestFormatEnabled=b.isBestFormatEnabled;var n=b.isHmpShareSheet?"hmp":a.CAF_REF_PREFIX;c=c?d.getReturnForChannel(n+"_"+c):d.return;c=new URL(c);b.cafStarAlignmentLeft||b.isUnrecognizedUsersRichPreviewEnabled?c.searchParams.append("starsLeft","1"):b.caf&&c.searchParams.append("cafHiResImg","1");c.searchParams.has("language")||c.searchParams.append("language",h.languageOfPreference||
b.locale||"en_US");c=c.toString();d=b.aapiBaseUrl;n=b.shareAapiCsrfToken;var r=b.tinyUrlEnabled,g=b.deeplinkInfo;g=g===k?{}:g;var p=b.shareDataAttributes.marketplaceId;return{tinyUrlEnabled:r===k?!1:r,aapiBaseUrl:d===k?"":d,shareAapiCsrfToken:n===k?"":n,marketplaceId:p===k?"":p,url:c,isOGTEnabled:l,originalUrl:f.shareframework||b.url||c,refMarkerId:e++,deeplinkInfo:g}}var a=t.SocialShareCore.Constants,r=t.SocialShareCore.Url,c=t.SocialShareCore.Metrics,e=0;return{prepareShareUrl:function(b,e,d,f,
h){var k=b.refId;c.logCounterRefactor("CAF.shareChannelClick",b.ingress);c.startTimer("CAF.fetchCAFAndTinyURL");k=a.CAF_REF_PREFIX+"_"+k;u.build(b).fetchCAFID(function(a,g){var n=new URL(b.url);a&&n.searchParams.append("cafId",a);g&&n.searchParams.append("cafASIN",g);b.shareUrl=new r(n.toString(),k);g=l(b,e);d.fetch({data:g,isAsync:f,callback:function(b){c.stopTimer("CAF.fetchCAFAndTinyURL");h(b,a)}})},f)},prepareHmpShareUrl:function(a,e,d,h,k){var b=a.refId;c.logCounter("HMP.shareChannelClick."+
a.ingress);c.startTimer("HMP.fetchPollIdAndTinyURL");b="hmp."+b;u.build(a).fetchHmpPollId(function(n){var g=new URL(a.url);n&&g.searchParams.append("hmpId",n);a.shareUrl=new r(g.toString(),b);a.url=g.toString();g=l(a,e);d.fetch({data:g,isAsync:h,callback:function(b){c.stopTimer("HMP.fetchPollIdAndTinyURL");f.trigger("ssf:event:hmpPollCreated",a);k(b,n)}})},h)}}})});
/* ******** */
